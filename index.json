[{"categories":null,"contents":" Troubleshooting: Errorcheck within Splunk GUI\nindex=_internal log_level=ERROR source=\u0026#34;/opt/splunk/var/log/splunk/splunkd.log\u0026#34; Check Splunk version\n| rest splunk_server=* count=1 /services/server/info | table version host Index List indexes with the retention period\n| rest splunk_server=* /services/data/indexes | eval \u0026#34;Retention Period (months)\u0026#34;=round((frozenTimePeriodInSecs/2628000),0) | search NOT title IN (\u0026#34;_*\u0026#34;, \u0026#34;main\u0026#34;, \u0026#34;history\u0026#34;, \u0026#34;summary\u0026#34;, \u0026#34;splunklogger\u0026#34;) | table title \u0026#34;Retention Period (months)\u0026#34; | rename title as Index ```for years, divide frozenTimePeriodInSecs/31556952; for days, divide frozenTimePeriodInSecs/86400``` Hosts Overview of hosts sending logs by index\n| tstats values(host) where index=* by index License Usage per day by index + percentages\nindex=_internal source=*license_usage.log type=\u0026#34;Usage\u0026#34; | bin _time span=1d | stats sum(b) as b by idx, _time | eval GB=round((b/31556952),2) | eventstats sum(GB) as total_GB by _time | eval percentage=round((GB/total_GB)*100,2) | sort -_time -GB | fields - b, total_GB | rename idx as Index, GB as \u0026#34;Size (GB)\u0026#34;, percentage as \u0026#34;Percentage (%)\u0026#34; | convert timeformat=\u0026#34;%Y-%m-%d\u0026#34; ctime(_time) as Date | fields Date, Index, \u0026#34;Size (GB)\u0026#34;, \u0026#34;Percentage (%)\u0026#34; ```for years, divide b/31556952; for days, divide b/31556952``` Users List users and their roles\n| rest /services/authentication/users splunk_server=local | fields title roles email | rename title as username ","date":"January 1, 0001","hero":"/images/default-hero.jpg","permalink":"https://siemforge.xyz/notes/splunk/spl/","summary":"\u003cdiv style=\"display: block; width: 100%; max-width: none;\"\u003e\n\u003c!-- Troubleshooting:  --\u003e\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eTroubleshooting:\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cp\u003eErrorcheck within Splunk GUI\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eindex\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e_internal log_level\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eERROR source\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;/opt/splunk/var/log/splunk/splunkd.log\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eCheck Splunk version\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e| rest splunk_server\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e* count\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e /services/server/info \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e| table version host\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003c!-- Index --\u003e\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eIndex\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cp\u003eList indexes with the retention period\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e| rest splunk_server\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e* /services/data/indexes \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e| eval \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Retention Period (months)\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eround\u003cspan style=\"color:#f92672\"\u003e((\u003c/span\u003efrozenTimePeriodInSecs/2628000\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e,0\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e| search NOT title IN \u003cspan style=\"color:#f92672\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;_*\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;main\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;history\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;summary\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;splunklogger\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e)\u003c/span\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e| table title \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Retention Period (months)\u0026#34;\u003c/span\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e| rename title as Index\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e```\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e years, divide frozenTimePeriodInSecs/31556952; \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e days, divide frozenTimePeriodInSecs/86400\u003cspan style=\"color:#e6db74\"\u003e```\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n            \u003c/div\u003e\n        \n    \u003c/div\u003e\n\u003c/div\u003e\n\n\u003c!-- Hosts --\u003e\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eHosts\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cp\u003eOverview of hosts sending logs by index\u003c/p\u003e","tags":null,"title":"Splunk searches"},{"categories":null,"contents":" Maintenance: Start Splunk\n/opt/splunk/bin/splunk start Stop Splunk\n/opt/splunk/bin/splunk stop Restart Splunk\n/opt/splunk/bin/splunk restart Check if Splunk is running\n/opt/splunk/bin/splunk status Reload a serverclass to push deployment apps without restarting Splunk\u0026quot;\n/opt/splunk/bin/splunk reload deploy-server -class [serverclass-name] Check license expiration date\n/opt/splunk/bin/splunk list licenses | grep \u0026#34;expiration_time\u0026#34; | awk -F\u0026#39;:\u0026#39; \u0026#39;{print $2}\u0026#39; | xargs -I{} date -d @{} +\u0026#34;%Y-%m-%d %H:%M:%S\u0026#34; List installed apps and their status\n/opt/splunk/bin/splunk list app List installed apps and their version (if found)\n/opt/splunk/bin/splunk list app | grep version /opt/splunk/etc/apps/*/default/app.conf Install an app\n/splunk install app \u0026lt;path to app.package\u0026gt; Update an app\n/splunk install app \u0026lt;path to app.package\u0026gt; -update 1 Remove an app\n/opt/splunk/bin/splunk remove app [appname] Check Splunk admins\n/opt/splunk/bin/splunk list user | grep admin -B2 Basic config: Enable Splunk service to start when the host boots up\n/opt/splunk/bin/splunk enable Disable Splunk service so it doesn\u0026rsquo;t start when the host boots up\n/opt/splunk/bin/splunk disable Extra: Find the startup message\ncat /opt/splunk/var/log/splunk/splunkd_stdout.log | grep \u0026#34;Splunk\u0026gt;\u0026#34; | tail -n 1 ","date":"January 1, 0001","hero":"/images/default-hero.jpg","permalink":"https://siemforge.xyz/notes/splunk/cli/index-cli/","summary":"\u003cdiv style=\"display: block; width: 100%; max-width: none;\"\u003e\n\u003c!-- Maintenance: --\u003e\n\u003cdiv class=\"note-card \"\u003e\n    \u003cdiv class=\"item\"\u003e\n        \u003ch5 class=\"note-title\"\u003e\u003cspan\u003eMaintenance:\u003c/span\u003e\u003c/h5\u003e\n        \n            \u003cdiv class=\"card\"\u003e\n                \u003cdiv class=\"card-body\"\u003e\u003cp\u003eStart Splunk\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e/opt/splunk/bin/splunk start\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eStop Splunk\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e/opt/splunk/bin/splunk stop\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eRestart Splunk\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e/opt/splunk/bin/splunk restart\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eCheck if Splunk is running\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e/opt/splunk/bin/splunk status\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eReload a serverclass to push deployment apps without restarting Splunk\u0026quot;\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e/opt/splunk/bin/splunk reload deploy-server -class \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003eserverclass-name\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eCheck license expiration date\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e/opt/splunk/bin/splunk list licenses | grep \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;expiration_time\u0026#34;\u003c/span\u003e | awk -F\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;:\u0026#39;\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;{print $2}\u0026#39;\u003c/span\u003e | xargs -I\u003cspan style=\"color:#f92672\"\u003e{}\u003c/span\u003e date -d @\u003cspan style=\"color:#f92672\"\u003e{}\u003c/span\u003e +\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;%Y-%m-%d %H:%M:%S\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eList installed apps and their status\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e/opt/splunk/bin/splunk list app\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eList installed apps and their version (if found)\u003c/p\u003e","tags":null,"title":"Splunk CLI commands"},{"categories":null,"contents":"","date":"January 1, 0001","hero":"/images/default-hero.jpg","permalink":"https://siemforge.xyz/notes/_index.nl/","summary":"","tags":null,"title":"Notes"}]
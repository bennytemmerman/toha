<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Linux Notes on SIEMForge</title><link>https://siemforge.xyz/notes/linux/</link><description>Recent content in Linux Notes on SIEMForge</description><generator>Hugo -- gohugo.io</generator><language>en</language><atom:link href="https://siemforge.xyz/notes/linux/index.xml" rel="self" type="application/rss+xml"/><item><title>Linux Bash commands</title><link>https://siemforge.xyz/notes/linux/cli/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://siemforge.xyz/notes/linux/cli/</guid><description>&lt;div style="display: block; width: 100%; max-width: none;">
&lt;!-- Troubleshooting: -->
&lt;div class="note-card ">
&lt;div class="item">
&lt;h5 class="note-title">&lt;span>Troubleshooting (files):&lt;/span>&lt;/h5>
&lt;div class="card">
&lt;div class="card-body">&lt;p>Find a file or directory&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>find / -type f -name &lt;span style="color:#e6db74">&amp;#34;filename&amp;#34;&lt;/span> 2&amp;gt;/dev/null
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>find / -type d -name &lt;span style="color:#e6db74">&amp;#34;dirname&amp;#34;&lt;/span> 2&amp;gt;/dev/null
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>find files that contain a pattern&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>find . -type f -exec grep -l &lt;span style="color:#e6db74">&amp;#39;version&amp;#39;&lt;/span> &lt;span style="color:#f92672">{}&lt;/span> &lt;span style="color:#ae81ff">\;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;!-- Troubleshooting: -->
&lt;div class="note-card ">
&lt;div class="item">
&lt;h5 class="note-title">&lt;span>Troubleshooting (system):&lt;/span>&lt;/h5>
&lt;div class="card">
&lt;div class="card-body">&lt;p>Check logs if a service has executed/failed before (I needed to check if logrotate was running daily, also checked for rsyslog after)&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>journalctl | grep logrotate
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>check if machine is a vm or barebone&lt;/p></description></item><item><title>Logrotate config</title><link>https://siemforge.xyz/notes/linux/logrotate/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://siemforge.xyz/notes/linux/logrotate/</guid><description>&lt;div style="display: block; width: 100%; max-width: none;">
&lt;div class="note-card ">
&lt;div class="item">
&lt;h5 class="note-title">&lt;span>Logrotate Configuration Cheat Sheet:&lt;/span>&lt;/h5>
&lt;div class="card">
&lt;div class="card-body">&lt;blockquote>
&lt;p>This cheat sheet provides an extensive list of Logrotate configuration directives, their descriptions, and examples.&lt;br>
Use this as a quick reference to master log rotation on Unix-like systems.&lt;/p>&lt;/blockquote>&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;div class="note-card ">
&lt;div class="item">
&lt;h5 class="note-title">&lt;span>Basic structure:&lt;/span>&lt;/h5>
&lt;div class="card">
&lt;div class="card-body">&lt;p>Each configuration block is tied to a log file or set of log files. Example:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>/var/log/example.log &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> daily
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> rotate &lt;span style="color:#ae81ff">7&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> compress
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> missingok
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> notifempty
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> create &lt;span style="color:#ae81ff">0640&lt;/span> root adm
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;p>&lt;div class="note-card ">
&lt;div class="item">
&lt;h5 class="note-title">&lt;span>Configuration Directives &amp;amp; Examples:&lt;/span>&lt;/h5>
&lt;div class="card">
&lt;div class="card-body">&lt;h4 id="basic-settings">Basic Settings:&lt;/h4>
&lt;p>&lt;code>rotate &amp;lt;count&amp;gt;&lt;/code>&lt;br>
Keep &lt;count> number of old log files before deleting them.&lt;/p></description></item><item><title>LVM cheatsheet</title><link>https://siemforge.xyz/notes/linux/lvm/lvm_cheatsheet/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://siemforge.xyz/notes/linux/lvm/lvm_cheatsheet/</guid><description>&lt;div style="display: block; width: 100%; max-width: none;">
&lt;div class="note-card ">
&lt;div class="item">
&lt;h5 class="note-title">&lt;span>LVM cheatsheet&lt;/span>&lt;/h5>
&lt;div class="card">
&lt;div class="card-body">&lt;h2 id="acronyms-you-must-know">Acronyms you must know&lt;/h2>
&lt;ul>
&lt;li>&lt;strong>PV&lt;/strong> = Physical Volume&lt;/li>
&lt;li>&lt;strong>VG&lt;/strong> = Volume Group&lt;/li>
&lt;li>&lt;strong>LV&lt;/strong> = Logical Volume&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code> PV1 PV2 PV3 PV4
\ | | /
VG1 VG2
| | \
LV1 LV2 LV3
&lt;/code>&lt;/pre>&lt;/div>
&lt;/div>
&lt;div class="card">
&lt;div class="card-body">&lt;h2 id="fdisk-reference-useful-pre-lvm">FDISK Reference (Useful Pre-LVM)&lt;/h2>
&lt;p>| Command | Description |
|&lt;/p>&lt;/div>
&lt;/div>
&lt;div class="card">
&lt;div class="card-body">&lt;/div>
&lt;/div>
&lt;div class="card">
&lt;div class="card-body">&lt;/div>
&lt;/div>
&lt;div class="card">
&lt;div class="card-body">|&lt;/div>
&lt;/div>
&lt;div class="card">
&lt;div class="card-body">&lt;/div>
&lt;/div>
&lt;div class="card">
&lt;div class="card-body">&lt;/div>
&lt;/div>
&lt;div class="card">
&lt;div class="card-body">&lt;/div>
&lt;/div>
&lt;div class="card">
&lt;div class="card-body">&lt;/div>
&lt;/div>
&lt;div class="card">
&lt;div class="card-body">&lt;/div>
&lt;/div>
&lt;div class="card">
&lt;div class="card-body">&lt;/div>
&lt;/div>
&lt;div class="card">
&lt;div class="card-body">&lt;/div>
&lt;/div>
&lt;div class="card">
&lt;div class="card-body">&lt;/div>
&lt;/div>
&lt;div class="card">
&lt;div class="card-body">&lt;/div>
&lt;/div>
&lt;div class="card">
&lt;div class="card-body">&lt;/div>
&lt;/div>
&lt;div class="card">
&lt;div class="card-body">-|
| &lt;code>d&lt;/code> | Delete a partition |
| &lt;code>F&lt;/code> | List free space |
| &lt;code>l&lt;/code> | List known partition types |
| &lt;code>n&lt;/code> | Add a new partition |
| &lt;code>p&lt;/code> | Print partition table |
| &lt;code>t&lt;/code> | Change a partition type |
| &lt;code>v&lt;/code> | Verify partition table |
| &lt;code>i&lt;/code> | Information about a partition |&lt;/div>
&lt;/div>
&lt;div class="card">
&lt;div class="card-body">&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sudo fdisk /dev/sdX
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/div>
&lt;div class="card">
&lt;div class="card-body">&lt;h2 id="step-by-step-lvm-setup">Step-by-Step LVM Setup&lt;/h2>
&lt;h3 id="1-add-a-physical-disk">1. Add a Physical Disk&lt;/h3>
&lt;p>connect a physical/virtual disk to your system.&lt;/p></description></item><item><title>scriptSudoUser</title><link>https://siemforge.xyz/notes/linux/scripts/addsudouser/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://siemforge.xyz/notes/linux/scripts/addsudouser/</guid><description>&lt;div style="display: block; width: 100%; max-width: none;">
&lt;div class="note-card ">
&lt;div class="item">
&lt;h5 class="note-title">&lt;span>Script: add sudo user&lt;/span>&lt;/h5>
&lt;div class="card">
&lt;div class="card-body">&lt;p>Create a sudo user that won&amp;rsquo;t prompt for password on executing sudo commands.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Ensure script is run as root&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#f92672">[[&lt;/span> $EUID -ne &lt;span style="color:#ae81ff">0&lt;/span> &lt;span style="color:#f92672">]]&lt;/span>; &lt;span style="color:#66d9ef">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo &lt;span style="color:#e6db74">&amp;#34;❌ This script must be run as root&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> exit &lt;span style="color:#ae81ff">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Prompt for new username&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>read -p &lt;span style="color:#e6db74">&amp;#34;Enter new username: &amp;#34;&lt;/span> username
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Check if user already exists&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">if&lt;/span> id &lt;span style="color:#e6db74">&amp;#34;&lt;/span>$username&lt;span style="color:#e6db74">&amp;#34;&lt;/span> &amp;amp;&amp;gt;/dev/null; &lt;span style="color:#66d9ef">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo &lt;span style="color:#e6db74">&amp;#34;⚠️ User &amp;#39;&lt;/span>$username&lt;span style="color:#e6db74">&amp;#39; already exists.&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> exit &lt;span style="color:#ae81ff">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Prompt for password (silent input)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>read -s -p &lt;span style="color:#e6db74">&amp;#34;Enter password for &lt;/span>$username&lt;span style="color:#e6db74">: &amp;#34;&lt;/span> password
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>read -s -p &lt;span style="color:#e6db74">&amp;#34;Confirm password: &amp;#34;&lt;/span> password_confirm
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Check passwords match&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#f92672">[[&lt;/span> &lt;span style="color:#e6db74">&amp;#34;&lt;/span>$password&lt;span style="color:#e6db74">&amp;#34;&lt;/span> !&lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#34;&lt;/span>$password_confirm&lt;span style="color:#e6db74">&amp;#34;&lt;/span> &lt;span style="color:#f92672">]]&lt;/span>; &lt;span style="color:#66d9ef">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo &lt;span style="color:#e6db74">&amp;#34;❌ Passwords do not match.&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> exit &lt;span style="color:#ae81ff">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Create user with home directory and bash shell&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>useradd -m -s /bin/bash &lt;span style="color:#e6db74">&amp;#34;&lt;/span>$username&lt;span style="color:#e6db74">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Set user password&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo &lt;span style="color:#e6db74">&amp;#34;&lt;/span>&lt;span style="color:#e6db74">${&lt;/span>username&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">:&lt;/span>&lt;span style="color:#e6db74">${&lt;/span>password&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span> | chpasswd
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Add user to sudo group&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>usermod -aG sudo &lt;span style="color:#e6db74">&amp;#34;&lt;/span>$username&lt;span style="color:#e6db74">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Create a sudoers file to allow passwordless sudo&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo &lt;span style="color:#e6db74">&amp;#34;&lt;/span>$username&lt;span style="color:#e6db74"> ALL=(ALL) NOPASSWD:ALL&amp;#34;&lt;/span> &amp;gt; &lt;span style="color:#e6db74">&amp;#34;/etc/sudoers.d/&lt;/span>$username&lt;span style="color:#e6db74">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>chmod &lt;span style="color:#ae81ff">440&lt;/span> &lt;span style="color:#e6db74">&amp;#34;/etc/sudoers.d/&lt;/span>$username&lt;span style="color:#e6db74">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo &lt;span style="color:#e6db74">&amp;#34;✅ User &amp;#39;&lt;/span>$username&lt;span style="color:#e6db74">&amp;#39; created with bash shell and passwordless sudo access.&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div></description></item></channel></rss>
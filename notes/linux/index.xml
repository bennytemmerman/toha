<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Linux Notes on SIEMForge</title><link>https://siemforge.xyz/notes/linux/</link><description>Recent content in Linux Notes on SIEMForge</description><generator>Hugo -- gohugo.io</generator><language>en</language><atom:link href="https://siemforge.xyz/notes/linux/index.xml" rel="self" type="application/rss+xml"/><item><title>Linux Bash commands</title><link>https://siemforge.xyz/notes/linux/cli/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://siemforge.xyz/notes/linux/cli/</guid><description>&lt;div style="display: block; width: 100%; max-width: none;">
&lt;!-- Troubleshooting: -->
&lt;div class="note-card ">
&lt;div class="item">
&lt;h5 class="note-title">&lt;span>Troubleshooting (files):&lt;/span>&lt;/h5>
&lt;div class="card">
&lt;div class="card-body">&lt;p>Find a file or directory&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>find / -type f -name &lt;span style="color:#e6db74">&amp;#34;filename&amp;#34;&lt;/span> 2&amp;gt;/dev/null
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>find / -type d -name &lt;span style="color:#e6db74">&amp;#34;dirname&amp;#34;&lt;/span> 2&amp;gt;/dev/null
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>find files that contain a pattern&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>find . -type f -exec grep -l &lt;span style="color:#e6db74">&amp;#39;version&amp;#39;&lt;/span> &lt;span style="color:#f92672">{}&lt;/span> &lt;span style="color:#ae81ff">\;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;!-- Troubleshooting: -->
&lt;div class="note-card ">
&lt;div class="item">
&lt;h5 class="note-title">&lt;span>Troubleshooting (system):&lt;/span>&lt;/h5>
&lt;div class="card">
&lt;div class="card-body">&lt;p>Check logs if a service has executed/failed before (I needed to check if logrotate was running daily, also checked for rsyslog after)&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>journalctl | grep logrotate
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>check if machine is a vm or barebone&lt;/p></description></item><item><title>Logrotate config</title><link>https://siemforge.xyz/notes/linux/logrotate/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://siemforge.xyz/notes/linux/logrotate/</guid><description>&lt;div style="display: block; width: 100%; max-width: none;">
&lt;div class="note-card ">
&lt;div class="item">
&lt;h5 class="note-title">&lt;span>Logrotate Configuration Cheat Sheet:&lt;/span>&lt;/h5>
&lt;div class="card">
&lt;div class="card-body">&lt;blockquote>
&lt;p>This cheat sheet provides an extensive list of Logrotate configuration directives, their descriptions, and examples.&lt;br>
Use this as a quick reference to master log rotation on Unix-like systems.&lt;/p>&lt;/blockquote>&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;div class="note-card ">
&lt;div class="item">
&lt;h5 class="note-title">&lt;span>Basic structure:&lt;/span>&lt;/h5>
&lt;div class="card">
&lt;div class="card-body">&lt;p>Each configuration block is tied to a log file or set of log files. Example:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>/var/log/example.log &lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> daily
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> rotate &lt;span style="color:#ae81ff">7&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> compress
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> missingok
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> notifempty
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> create &lt;span style="color:#ae81ff">0640&lt;/span> root adm
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;p>&lt;div class="note-card ">
&lt;div class="item">
&lt;h5 class="note-title">&lt;span>Configuration Directives &amp;amp; Examples:&lt;/span>&lt;/h5>
&lt;div class="card">
&lt;div class="card-body">&lt;h4 id="basic-settings">Basic Settings:&lt;/h4>
&lt;p>&lt;code>rotate &amp;lt;count&amp;gt;&lt;/code>&lt;br>
Keep &lt;count> number of old log files before deleting them.&lt;/p></description></item><item><title>LVM cheatsheet</title><link>https://siemforge.xyz/notes/linux/lvm/lvm_cheatsheet/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://siemforge.xyz/notes/linux/lvm/lvm_cheatsheet/</guid><description>&lt;div style="display: block; width: 100%; max-width: none;">
&lt;div class="note-card ">
&lt;div class="item">
&lt;h5 class="note-title">&lt;span>LVM cheatsheet&lt;/span>&lt;/h5>
&lt;div class="card">
&lt;div class="card-body">&lt;h2 id="acronyms-you-must-know">Acronyms you must know&lt;/h2>
&lt;ul>
&lt;li>&lt;strong>PV&lt;/strong> = Physical Volume&lt;/li>
&lt;li>&lt;strong>VG&lt;/strong> = Volume Group&lt;/li>
&lt;li>&lt;strong>LV&lt;/strong> = Logical Volume&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code> PV1 PV2 PV3 PV4
\ | | /
VG1 VG2
| | \
LV1 LV2 LV3
&lt;/code>&lt;/pre>&lt;/div>
&lt;/div>
&lt;div class="card">
&lt;div class="card-body">&lt;h2 id="step-by-step-lvm-setup">Step-by-Step LVM Setup&lt;/h2>
&lt;h3 id="1-add-a-physical-disk">1. Add a Physical Disk&lt;/h3>
&lt;p>connect a physical/virtual disk to your system.&lt;/p>
&lt;p>&lt;strong>Overview of block devices&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>lsblk
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>Used/available space on mounted filesystems&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>df -h
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/div>
&lt;div class="card">
&lt;div class="card-body">&lt;h3 id="2-create-physical-volumes">2. Create Physical Volumes&lt;/h3>
&lt;p>&lt;strong>Info&lt;/strong>&lt;/p></description></item><item><title>fdisk</title><link>https://siemforge.xyz/notes/linux/fdisk/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://siemforge.xyz/notes/linux/fdisk/</guid><description>&lt;div style="display: block; width: 100%; max-width: none;">
&lt;div class="note-card ">
&lt;div class="item">
&lt;h5 class="note-title">&lt;span>fdisk cheatsheet:&lt;/span>&lt;/h5>
&lt;div class="card">
&lt;div class="card-body">&lt;p>fdisk is a powerful, text-based utility used to create, delete, and manage disk partitions in Linux systems. It supports MBR (Master Boot Record) partition tables and is best suited for systems not using GPT (GUID Partition Table).&lt;/p>
&lt;h2 id="basic-syntax">Basic syntax&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>fdisk &lt;span style="color:#f92672">[&lt;/span>options&lt;span style="color:#f92672">]&lt;/span> /dev/sdX
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Where &lt;code>/dev/sdX&lt;/code> is the disk you want to operate on (e.g., &lt;code>/dev/sda&lt;/code>, &lt;code>/dev/sdb&lt;/code>).&lt;/p>
&lt;blockquote>
&lt;p>Always double-check the disk name to avoid data loss.&lt;/p></description></item><item><title>TCPDump cheatsheet</title><link>https://siemforge.xyz/notes/linux/tcpdump/tcpdump_cheatsheet/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://siemforge.xyz/notes/linux/tcpdump/tcpdump_cheatsheet/</guid><description>&lt;div style="display: block; width: 100%; max-width: none;">
&lt;div class="note-card ">
&lt;div class="item">
&lt;h5 class="note-title">&lt;span>TCPDump cheatsheet&lt;/span>&lt;/h5>
&lt;div class="card">
&lt;div class="card-body">&lt;h1 id="general-syntax">General Syntax&lt;/h1>
&lt;p>tcpdump [options] [expression]&lt;/p>&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;h1 id="packet-capturing-options">Packet Capturing Options&lt;/h1>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Switch&lt;/th>
&lt;th>Syntax&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>-i any&lt;/td>
&lt;td>tcpdump -i any&lt;/td>
&lt;td>Capture from all interfaces&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>-i eth0&lt;/td>
&lt;td>tcpdump -i eth0&lt;/td>
&lt;td>Capture from specific interface ( Ex Eth0)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>-c&lt;/td>
&lt;td>tcpdump -i eth0 -c 10&lt;/td>
&lt;td>Capture first 10 packets and exit&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>-D&lt;/td>
&lt;td>tcpdump -D&lt;/td>
&lt;td>Show available interfaces&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>-A&lt;/td>
&lt;td>tcpdump -i eth0 -A&lt;/td>
&lt;td>Print in ASCII&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>-w&lt;/td>
&lt;td>tcpdump -i eth0 -w tcpdump.txt&lt;/td>
&lt;td>To save capture to a file&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>-r&lt;/td>
&lt;td>tcpdump -r tcpdump.txt&lt;/td>
&lt;td>Read and analyze saved capture file&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&amp;ldquo;-n&amp;rdquo;&lt;/td>
&lt;td>tcpdump -n -I eth0&lt;/td>
&lt;td>Do not resolve host names&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>-nn&lt;/td>
&lt;td>tcpdump -n -i eth0&lt;/td>
&lt;td>Stop Domain name translation and lookups (Host names or port names )&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>tcp&lt;/td>
&lt;td>tcpdump -i eth0 -c 10 -w tcpdump.pcap tcp&lt;/td>
&lt;td>Capture TCP packets only&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>port&lt;/td>
&lt;td>tcpdump -i eth0 port 80&lt;/td>
&lt;td>Capture traffic from a defined port only&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>host&lt;/td>
&lt;td>tcpdump host 192.168.1.100&lt;/td>
&lt;td>Capture packets from specific host&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>net&lt;/td>
&lt;td>tcpdump net 10.1.1.0/16&lt;/td>
&lt;td>Capture files from network subnet&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>src&lt;/td>
&lt;td>tcpdump src 10.1.1.100&lt;/td>
&lt;td>Capture from a specific source address&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>dst&lt;/td>
&lt;td>tcpdump dst 10.1.1.100&lt;/td>
&lt;td>Capture from a specific destination address&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;service>&lt;/td>
&lt;td>tcpdump http&lt;/td>
&lt;td>Filter traffic based on a port number for a service&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;port>&lt;/td>
&lt;td>tcpdump port 80&lt;/td>
&lt;td>Filter traffic based on a service&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>port range&lt;/td>
&lt;td>tcpdump portrange 21-125&lt;/td>
&lt;td>Filter based on port range&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>-S&lt;/td>
&lt;td>tcpdump -S http&lt;/td>
&lt;td>Display entire packet&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ipv6&lt;/td>
&lt;td>tcpdunp -IPV6&lt;/td>
&lt;td>Show only IPV6 packets&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>-d&lt;/td>
&lt;td>tcpdump -d tcpdump.pcap&lt;/td>
&lt;td>display human readable form in standard output&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>-F&lt;/td>
&lt;td>tcpdump -F tcpdump.pcap&lt;/td>
&lt;td>Use the given file as input for filter&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>-I&lt;/td>
&lt;td>tcpdump -I eth0&lt;/td>
&lt;td>set interface as monitor mode&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>-L&lt;/td>
&lt;td>tcpdump -L&lt;/td>
&lt;td>Display data link types for the interface&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&amp;ldquo;-N&amp;rdquo;&lt;/td>
&lt;td>tcpdump -N tcpdump.pcap&lt;/td>
&lt;td>not printing domian names&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>-K&lt;/td>
&lt;td>tcpdump -K tcpdump.pcap&lt;/td>
&lt;td>Do not verify checksum&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>-p&lt;/td>
&lt;td>tcpdump -p -i eth0&lt;/td>
&lt;td>Not capturing in promiscuous mode&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h1 id="logical-operators">Logical Operators&lt;/h1>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Operator&lt;/th>
&lt;th>Syntax&lt;/th>
&lt;th>Example&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>AND&lt;/td>
&lt;td>and, &amp;amp;&amp;amp;&lt;/td>
&lt;td>tcpdump -n src 192.168.1.1 and dst port 21&lt;/td>
&lt;td>Combine filtering options&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>OR&lt;/td>
&lt;td>or,&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>EXCEPT&lt;/td>
&lt;td>not, !&lt;/td>
&lt;td>tcpdump dst 10.1.1.1 and not icmp&lt;/td>
&lt;td>Negation of the condition&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>LESS&lt;/td>
&lt;td>&amp;lt;&lt;/td>
&lt;td>tcpdump &amp;lt;32&lt;/td>
&lt;td>Shows packets size less than 32&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>GREATER&lt;/td>
&lt;td>&amp;gt;&lt;/td>
&lt;td>tcpdump &amp;gt;=32&lt;/td>
&lt;td>Shows packets size greater than 32&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h1 id="output-options">Output options&lt;/h1>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Switch&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>-q&lt;/td>
&lt;td>Quite and less verbose mode display less details&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>#VALUE!&lt;/td>
&lt;td>Do not print time stamp details in dump&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>-v&lt;/td>
&lt;td>Little verbose output&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>-vv&lt;/td>
&lt;td>More verbose output&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>-vvv&lt;/td>
&lt;td>Most verbose output&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>-x&lt;/td>
&lt;td>Print data and headers in HEX format&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>-xx&lt;/td>
&lt;td>Print data with link headers in HEX format&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>-X&lt;/td>
&lt;td>Print output in HEX and ASCII format excluding link headers&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>-XX&lt;/td>
&lt;td>Print output in HEX and ASCII format including link headers&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>-e&lt;/td>
&lt;td>Print Link (Ethernet) headers&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>-S&lt;/td>
&lt;td>Print sequence numbers in exact format&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h1 id="protocols">Protocols&lt;/h1>
&lt;ul>
&lt;li>Ether&lt;/li>
&lt;li>fddi&lt;/li>
&lt;li>icmp&lt;/li>
&lt;li>ip&lt;/li>
&lt;li>ip6&lt;/li>
&lt;li>ppp&lt;/li>
&lt;li>radio&lt;/li>
&lt;li>rarp&lt;/li>
&lt;li>slip&lt;/li>
&lt;li>tcp&lt;/li>
&lt;li>udp&lt;/li>
&lt;li>wlan&lt;/li>
&lt;/ul>
&lt;h1 id="common-commands-with-protocols-for-filtering-captures">Common Commands with Protocols for Filtering Captures&lt;/h1>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Command&lt;/th>
&lt;th>Description&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>src/ dsthost (host name or IP)&lt;/td>
&lt;td>Filter by source or destination IP address or host&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ether src/ dst host (ethernet host name or IP)&lt;/td>
&lt;td>Ethernet host filtering by source or destination&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>src/ dstnet (subnet mask in CIDR)&lt;/td>
&lt;td>Filter by subnet&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>tcp/udp src/dst port ( port number)&lt;/td>
&lt;td>Filter TCP or UDP packets by source or destination port&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>tcp/udp src/dst port range ( port number range)&lt;/td>
&lt;td>Filter TCP or UDP packets by source or destination port range&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ether/ip broadcast&lt;/td>
&lt;td>Filter for Ethernet or IP broadcasts&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ether/ip multicast&lt;/td>
&lt;td>Filter for Ethernet or IP multicasts&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;/div></description></item><item><title>scriptSudoUser</title><link>https://siemforge.xyz/notes/linux/scripts/addsudouser/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://siemforge.xyz/notes/linux/scripts/addsudouser/</guid><description>&lt;div style="display: block; width: 100%; max-width: none;">
&lt;div class="note-card ">
&lt;div class="item">
&lt;h5 class="note-title">&lt;span>Script: add sudo user&lt;/span>&lt;/h5>
&lt;div class="card">
&lt;div class="card-body">&lt;p>Create a sudo user that won&amp;rsquo;t prompt for password on executing sudo commands.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Ensure script is run as root&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#f92672">[[&lt;/span> $EUID -ne &lt;span style="color:#ae81ff">0&lt;/span> &lt;span style="color:#f92672">]]&lt;/span>; &lt;span style="color:#66d9ef">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo &lt;span style="color:#e6db74">&amp;#34;❌ This script must be run as root&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> exit &lt;span style="color:#ae81ff">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Prompt for new username&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>read -p &lt;span style="color:#e6db74">&amp;#34;Enter new username: &amp;#34;&lt;/span> username
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Check if user already exists&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">if&lt;/span> id &lt;span style="color:#e6db74">&amp;#34;&lt;/span>$username&lt;span style="color:#e6db74">&amp;#34;&lt;/span> &amp;amp;&amp;gt;/dev/null; &lt;span style="color:#66d9ef">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo &lt;span style="color:#e6db74">&amp;#34;⚠️ User &amp;#39;&lt;/span>$username&lt;span style="color:#e6db74">&amp;#39; already exists.&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> exit &lt;span style="color:#ae81ff">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Prompt for password (silent input)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>read -s -p &lt;span style="color:#e6db74">&amp;#34;Enter password for &lt;/span>$username&lt;span style="color:#e6db74">: &amp;#34;&lt;/span> password
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>read -s -p &lt;span style="color:#e6db74">&amp;#34;Confirm password: &amp;#34;&lt;/span> password_confirm
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Check passwords match&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#f92672">[[&lt;/span> &lt;span style="color:#e6db74">&amp;#34;&lt;/span>$password&lt;span style="color:#e6db74">&amp;#34;&lt;/span> !&lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#34;&lt;/span>$password_confirm&lt;span style="color:#e6db74">&amp;#34;&lt;/span> &lt;span style="color:#f92672">]]&lt;/span>; &lt;span style="color:#66d9ef">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo &lt;span style="color:#e6db74">&amp;#34;❌ Passwords do not match.&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> exit &lt;span style="color:#ae81ff">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Create user with home directory and bash shell&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>useradd -m -s /bin/bash &lt;span style="color:#e6db74">&amp;#34;&lt;/span>$username&lt;span style="color:#e6db74">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Set user password&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo &lt;span style="color:#e6db74">&amp;#34;&lt;/span>&lt;span style="color:#e6db74">${&lt;/span>username&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">:&lt;/span>&lt;span style="color:#e6db74">${&lt;/span>password&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span> | chpasswd
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Add user to sudo group&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>usermod -aG sudo &lt;span style="color:#e6db74">&amp;#34;&lt;/span>$username&lt;span style="color:#e6db74">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># Create a sudoers file to allow passwordless sudo&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo &lt;span style="color:#e6db74">&amp;#34;&lt;/span>$username&lt;span style="color:#e6db74"> ALL=(ALL) NOPASSWD:ALL&amp;#34;&lt;/span> &amp;gt; &lt;span style="color:#e6db74">&amp;#34;/etc/sudoers.d/&lt;/span>$username&lt;span style="color:#e6db74">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>chmod &lt;span style="color:#ae81ff">440&lt;/span> &lt;span style="color:#e6db74">&amp;#34;/etc/sudoers.d/&lt;/span>$username&lt;span style="color:#e6db74">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>echo &lt;span style="color:#e6db74">&amp;#34;✅ User &amp;#39;&lt;/span>$username&lt;span style="color:#e6db74">&amp;#39; created with bash shell and passwordless sudo access.&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;/div></description></item></channel></rss>
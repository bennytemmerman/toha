<!doctype html><html lang=en><head><title>Splunk Upgrade procedure</title><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><link rel=stylesheet href=/application.357dd1de946e0748ed1ed88009a6203f270bccbdabe5793ab4aab15964be163a.css integrity="sha256-NX3R3pRuB0jtHtiACaYgPycLzL2r5Xk6tKqxWWS+Fjo="><link rel=icon type=image/png href=/images/site/favicon_hu_c11ce0d32209d128.png><meta property="og:title" content="SIEMForge"><meta property="og:type" content="website"><meta property="og:description" content="Portfolio and personal blog of Benny Temmerman, SIEMForge"><meta property="og:image" content="/images/author/john.png"><meta property="og:url" content="https://siemforge.xyz"><script integrity="sha256-DO4ugzEwhTW1Id1UIWn0gUJWaebCYOypeTit6LW4QB4=">let theme=localStorage.getItem("theme-scheme")||localStorage.getItem("darkmode:color-scheme")||"light";theme==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?theme="dark":theme="light"),document.documentElement.setAttribute("data-theme",theme)</script></head><body class="type-notes kind-page" data-bs-spy=scroll data-bs-target=#TableOfContents data-bs-offset=80><div class="container-fluid bg-secondary wrapper"><nav class="navbar navbar-expand-xl top-navbar shadow" id=top-navbar><div class=container><button class="navbar-toggler navbar-light" id=sidebar-toggler type=button>
<i data-feather=sidebar></i>
</button>
<a class=navbar-brand href=/><img src=/images/site/main-logo_hu_c11ce0d32209d128.png id=logo alt=Logo>
SIEMForge</a>
<button class="navbar-toggler navbar-light" id=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#top-nav-items aria-label=menu>
<i data-feather=menu></i></button><div class="collapse navbar-collapse dynamic-navbar" id=top-nav-items><ul class="nav navbar-nav ms-auto"><li class=nav-item><a class=nav-link href=/#home>Home</a></li><li class=nav-item><a class=nav-link href=/#about>About</a></li><li class=nav-item><a class=nav-link href=/#skills>Skills</a></li><li class=nav-item><a class=nav-link href=/#experiences>Experiences</a></li><li class=nav-item><a class=nav-link href=/#education>Education</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false>More</a><div class=dropdown-menu aria-labelledby=navbarDropdown><a class=dropdown-item href=/#projects>Projects</a>
<a class=dropdown-item href=/#featured-posts>Featured Posts</a>
<a class=dropdown-item href=/#accomplishments>Accomplishments</a></div></li><div id=top-navbar-divider></div><li class=nav-item><a class=nav-link id=blog-link href=/posts>Posts</a></li><li class=nav-item><a class=nav-link id=note-link href=/notes>Notes</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=themeSelector role=button data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false><img id=navbar-theme-icon-svg class=theme-icon src=/icons/moon-svgrepo-com.svg width=20 alt="Dark Theme"></a><div id=themeMenu class="dropdown-menu dropdown-menu-icons-only" aria-labelledby=themeSelector><a class="dropdown-item nav-link" href=# data-scheme=light><img class=theme-icon src=/icons/sun-svgrepo-com.svg width=20 alt="Light Theme">
</a><a class="dropdown-item nav-link" href=# data-scheme=dark><img class=theme-icon src=/icons/moon-svgrepo-com.svg width=20 alt="Dark Theme">
</a><a class="dropdown-item nav-link" href=# data-scheme=system><img class=theme-icon src=/icons/computer-svgrepo-com.svg width=20 alt="System Theme"></a></div></li></ul></div></div><img src=/images/site/main-logo_hu_c11ce0d32209d128.png class=d-none id=main-logo alt=Logo>
<img src=/images/site/inverted-logo_hu_c11ce0d32209d128.png class=d-none id=inverted-logo alt="Inverted Logo"></nav><section class=sidebar-section id=sidebar-section><div class=sidebar-holder><div class=sidebar id=sidebar><form class=mx-auto method=get action=/search><input type=text name=keyword placeholder=Search data-search id=search-box></form><div class=sidebar-tree><ul class=tree id=tree><li id=list-heading><a href=/notes data-filter=all>Notes</a></li><div class=subtree><li><i data-feather=minus-circle></i><a class="active list-link" href=/notes/splunk/> Splunk</a><ul class=active><li><a class=list-link href=/notes/splunk/spl/ title=SPL>SPL</a></li><li><a class=list-link href=/notes/splunk/cli/ title=CLI>CLI</a></li><li><a class="active list-link" href=/notes/splunk/splunk-upgrade/ title=Upgrade>Upgrade</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/notes/linux/> Linux</a><ul><li><a class=list-link href=/notes/linux/cli/ title=Bash>Bash</a></li></ul></li></div></ul></div></div></div></section><section class=content-section id=content-section><div class="content container-fluid" id=content><div class="container-fluid note-card-holder" id=note-card-holder><div style=display:block;width:100%;max-width:none><div class=note-card><div class=item><h5 class=note-title><span>Upgrade procedure:</span></h5><div class=card><div class=card-body><h1 id=splunk-upgrade-guide>Splunk Upgrade Guide</h1><p>This document provides a step-by-step procedure to upgrade Splunk from an existing version to a newer release. Follow each section carefully to ensure a smooth upgrade process.</p><h2 id=table-of-contents>Table of Contents</h2><ol><li>Preparation</li><li>Download and Transfer Files</li><li>Pre-Upgrade Checks</li><li>Device State Management</li><li>Backup Current Configuration</li><li>Install the New Version</li><li>Post-Upgrade Verification</li><li>Documentation and Communication</li></ol><h2 id=1-preparation>1. Preparation</h2><ul><li>Ensure you have access to the target devices and necessary permissions.</li><li>Confirm the current Splunk version.</li><li>Notify customer and colleagues about the upcoming upgrade.</li><li>Review release notes for the target version.</li></ul><h2 id=2-download-and-transfer-files>2. Download and Transfer Files</h2><h3 id=download-the-splunk-installer>Download the Splunk Installer</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo -i
</span></span><span style=display:flex><span>cd /tmp
</span></span><span style=display:flex><span>wget -O splunk-&lt;version&gt;-&lt;hash&gt;-Linux-x86_64.tgz <span style=color:#e6db74>&#34;https://download.splunk.com/products/splunk/releases/&lt;version&gt;/linux/splunk-&lt;version&gt;-&lt;hash&gt;-Linux-x86_64.tgz&#34;</span>
</span></span></code></pre></div><h3 id=transfer-the-installer-to-target-devices>Transfer the Installer to Target Devices</h3><p>Use WinSCP or similar tools to connect to the device:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>set path<span style=color:#f92672>=</span>C:<span style=color:#ae81ff>\P</span>rogram Files <span style=color:#f92672>(</span>x86<span style=color:#f92672>)</span><span style=color:#ae81ff>\W</span>inSCP;%path%
</span></span><span style=display:flex><span>winscp sftp://&lt;CLI-account&gt;@&lt;device_NAT_IP&gt;:/tmp
</span></span><span style=display:flex><span>put <span style=color:#e6db74>&#34;path\to\splunk-&lt;version&gt;-&lt;hash&gt;-Linux-x86_64.tgz&#34;</span> <span style=color:#e6db74>&#34;/tmp/splunk-&lt;version&gt;-&lt;hash&gt;-Linux-x86_64.tgz&#34;</span>
</span></span></code></pre></div><p>Use SCP on more recent windows machines or on Linux:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>scp <span style=color:#e6db74>&#34;path\to\splunk-&lt;version&gt;-&lt;hash&gt;-Linux-x86_64.tgz&#34;</span> user@remote-ip:<span style=color:#e6db74>&#34;/tmp/splunk-&lt;version&gt;-&lt;hash&gt;-Linux-x86_64.tgz&#34;</span>
</span></span></code></pre></div><h2 id=3-pre-upgrade-checks>3. Pre-Upgrade Checks</h2><p>Check if Splunk has an active process:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ps -ef | grep splunk
</span></span></code></pre></div><p>Check if Splunk is running:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>/opt/splunk/bin/splunk status
</span></span></code></pre></div><p>Check Splunk version:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>/opt/splunk/bin/splunk --version
</span></span></code></pre></div><h2 id=4-device-state-management>4. Device State Management</h2><p>Check whether a monitoring needs to set the host in maintenance mode</p><p>On Splunk in environments with index clusters: Maintenance mode halts most bucket fixup activity and prevents frequent rolling of hot buckets. It is useful when performing peer upgrades and other maintenance activities on an indexer cluster.
Enable maintenance mode:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>/opt/splunk/bin/splunk enable maintenance-mode
</span></span></code></pre></div><p>Disable maintenance mode:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>/opt/splunk/bin/splunk disable maintenance-mode
</span></span></code></pre></div><p>Enable maintenance mode:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>/opt/splunk/bin/splunk show maintenance-mode
</span></span></code></pre></div><h2 id=5-backup-current-configuration>5. Backup Current Configuration</h2><p>Check KV Store status</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>/opt/splunk/bin/splunk show kvstore-status
</span></span></code></pre></div><p>Backup KV Store</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>/opt/splunk/bin/splunk backup kvstore
</span></span></code></pre></div><p>Check backup</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ls -la /opt/splunk/var/lib/splunk/kvstorebackup/
</span></span></code></pre></div><p>Backup config files</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo -i
</span></span><span style=display:flex><span>cd /tmp
</span></span><span style=display:flex><span>mkdir /tmp/etc_backup<span style=color:#66d9ef>$(</span>date +<span style=color:#e6db74>&#34;%d-%m-%Y&#34;</span><span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>cp -a /opt/splunk/etc/ /tmp/etc_backup<span style=color:#66d9ef>$(</span>date +<span style=color:#e6db74>&#34;%d-%m-%Y&#34;</span><span style=color:#66d9ef>)</span>/
</span></span></code></pre></div><p>Check backup</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ls /tmp/etc_backup<span style=color:#66d9ef>$(</span>date +<span style=color:#e6db74>&#34;%d-%m-%Y&#34;</span><span style=color:#66d9ef>)</span>/etc
</span></span></code></pre></div><h2 id=6-install-the-new-version>6. Install the New Version</h2><p>stop splunk using Splunk command</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>/opt/splunk/bin/splunk stop
</span></span></code></pre></div><p>stop splunk using systemctl command</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>systemctl stop splunk
</span></span></code></pre></div><p>Unpack the Installer</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>tar -xvzf /tmp/splunk-&lt;version&gt;-&lt;hash&gt;-Linux-x86_64.tgz -C /opt/
</span></span></code></pre></div><p>Change the owner of the Splunk folder recursively with the account running Splunk</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>chown -R splunk.splunk /opt/splunk
</span></span></code></pre></div><p>Start Splunk with License Acceptance</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>/opt/splunk/bin/splunk start --accept-license --answer-yes
</span></span></code></pre></div><h2 id=7-post-upgrade-verification>7. Post-Upgrade Verification</h2><p>Check if Splunk is running</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>/opt/splunk/bin/splunk status
</span></span></code></pre></div><p>Check recent logs for errors</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>tail -20f /opt/splunk/var/log/splunk/splunkd.log
</span></span></code></pre></div><p>check Splunk version</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>/opt/splunk/bin/splunk --version
</span></span></code></pre></div><h2 id=8-documentation-and-communication>8. Documentation and Communication</h2><ul><li>Update internal documentation with the new version details.</li><li>Notify customer and colleagues of the successful upgrade.</li><li>Share release notes and any post-upgrade instructions.</li></ul></div></div></div></div></div></div></div></section></div><footer id=footer class="container-fluid text-center align-content-center footer pb-2"><div class="container pt-5"><div class="row text-start"><div class="col-md-4 col-sm-12"><h5>Navigation</h5><ul><li class=nav-item><a class=smooth-scroll href=https://siemforge.xyz/#about>About</a></li><li class=nav-item><a class=smooth-scroll href=https://siemforge.xyz/#skills>Skills</a></li><li class=nav-item><a class=smooth-scroll href=https://siemforge.xyz/#experiences>Experiences</a></li><li class=nav-item><a class=smooth-scroll href=https://siemforge.xyz/#education>Education</a></li><li class=nav-item><a class=smooth-scroll href=https://siemforge.xyz/#projects>Projects</a></li><li class=nav-item><a class=smooth-scroll href=https://siemforge.xyz/#featured-posts>Featured Posts</a></li><li class=nav-item><a class=smooth-scroll href=https://siemforge.xyz/#accomplishments>Accomplishments</a></li><li class=nav-item><a class=smooth-scroll href=https://toha-guides.netlify.app/posts/>Docs</a></li></ul></div><div class="col-md-4 col-sm-12"><h5>Contact me:</h5><ul><li><a href=mailto:benny@siemforge.xyz target=_blank rel=noopener><span><i class="fas fa-envelope"></i></span> <span>benny@siemforge.xyz</span></a></li><li><a href=https://github.com/bennytemmerman target=_blank rel=noopener><span><i class="fab fa-github"></i></span> <span>bennytemmerman</span></a></li><li><a href=https://www.linkedin.com/in/bennytemmerman target=_blank rel=noopener><span><i class="fab fa-linkedin"></i></span> <span>Benny Temmerman</span></a></li><li><a href=tel:************ target=_blank rel=noopener><span><i class="fas fa-phone-alt"></i></span> <span>************</span></a></li><li><a href=https://www.researchgate.net/profile/ target=_blank rel=noopener><span><i class="fab fa-researchgate"></i></span> <span>Benny Temmerman</span></a></li></ul></div></div></div><hr><div class=container><p id=disclaimer><strong>Liability Notice:</strong> This site provides information about my personal findings combined with information found on the internet. Projects and articles may be used as inspiration, however I am not responsible for any fun or harm caused.</p></div><hr><div class=container><div class="row text-start"><div class=col-md-4><a id=theme href=https://github.com/hugo-toha/toha target=_blank rel=noopener><img src=/images/theme-logo_hu_b3360284c55cf72d.png alt="Toha Theme Logo">
Toha</a></div><div class="col-md-4 text-center">© 2025 Copyright.</div><div class="col-md-4 text-end"><a id=hugo href=https://gohugo.io/ target=_blank rel=noopener>Powered by
<img src=/images/hugo-logo.svg alt="Hugo Logo" height=18></a></div></div></div></footer><script src=/application.bf4c8b43674ad09b4c683a98e5ab2a4aafc9a69bbdb3bd92dae1098ffd49c3c6.js integrity="sha256-v0yLQ2dK0JtMaDqY5asqSq/Jppu9s72S2uEJj/1Jw8Y=" defer></script></body></html>
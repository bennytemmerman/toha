<!doctype html><html lang=en><head><title>Notes</title><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><link rel=stylesheet href=/application.357dd1de946e0748ed1ed88009a6203f270bccbdabe5793ab4aab15964be163a.css integrity="sha256-NX3R3pRuB0jtHtiACaYgPycLzL2r5Xk6tKqxWWS+Fjo="><link rel=icon type=image/png href=/images/site/favicon_hu_c11ce0d32209d128.png><link rel=alternate type=application/rss+xml href=https://siemforge.xyz/notes/index.xml title=SIEMForge><meta property="og:title" content="SIEMForge"><meta property="og:type" content="website"><meta property="og:description" content="Portfolio and personal blog of Benny Temmerman, SIEMForge"><meta property="og:image" content="/images/author/john.png"><meta property="og:url" content="https://siemforge.xyz"><script integrity="sha256-DO4ugzEwhTW1Id1UIWn0gUJWaebCYOypeTit6LW4QB4=">let theme=localStorage.getItem("theme-scheme")||localStorage.getItem("darkmode:color-scheme")||"light";theme==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?theme="dark":theme="light"),document.documentElement.setAttribute("data-theme",theme)</script></head><body class="type-notes kind-section" data-bs-spy=scroll data-bs-target=#TableOfContents data-bs-offset=80><div class="container-fluid bg-secondary wrapper"><nav class="navbar navbar-expand-xl top-navbar shadow" id=top-navbar><div class=container><button class="navbar-toggler navbar-light" id=sidebar-toggler type=button>
<i data-feather=sidebar></i>
</button>
<a class=navbar-brand href=/><img src=/images/site/main-logo_hu_c11ce0d32209d128.png id=logo alt=Logo>
SIEMForge</a>
<button class="navbar-toggler navbar-light" id=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#top-nav-items aria-label=menu>
<i data-feather=menu></i></button><div class="collapse navbar-collapse dynamic-navbar" id=top-nav-items><ul class="nav navbar-nav ms-auto"><li class=nav-item><a class=nav-link href=/#home>Home</a></li><li class=nav-item><a class=nav-link href=/#about>About</a></li><li class=nav-item><a class=nav-link href=/#skills>Skills</a></li><li class=nav-item><a class=nav-link href=/#experiences>Experiences</a></li><li class=nav-item><a class=nav-link href=/#education>Education</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false>More</a><div class=dropdown-menu aria-labelledby=navbarDropdown><a class=dropdown-item href=/#projects>Projects</a>
<a class=dropdown-item href=/#featured-posts>Featured Posts</a>
<a class=dropdown-item href=/#accomplishments>Accomplishments</a></div></li><div id=top-navbar-divider></div><li class=nav-item><a class=nav-link id=blog-link href=/posts>Posts</a></li><li class=nav-item><a class=nav-link id=note-link href=/notes>Notes</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=themeSelector role=button data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false><img id=navbar-theme-icon-svg class=theme-icon src=/icons/moon-svgrepo-com.svg width=20 alt="Dark Theme"></a><div id=themeMenu class="dropdown-menu dropdown-menu-icons-only" aria-labelledby=themeSelector><a class="dropdown-item nav-link" href=# data-scheme=light><img class=theme-icon src=/icons/sun-svgrepo-com.svg width=20 alt="Light Theme">
</a><a class="dropdown-item nav-link" href=# data-scheme=dark><img class=theme-icon src=/icons/moon-svgrepo-com.svg width=20 alt="Dark Theme">
</a><a class="dropdown-item nav-link" href=# data-scheme=system><img class=theme-icon src=/icons/computer-svgrepo-com.svg width=20 alt="System Theme"></a></div></li></ul></div></div><img src=/images/site/main-logo_hu_c11ce0d32209d128.png class=d-none id=main-logo alt=Logo>
<img src=/images/site/inverted-logo_hu_c11ce0d32209d128.png class=d-none id=inverted-logo alt="Inverted Logo"></nav><section class=sidebar-section id=sidebar-section><div class=sidebar-holder><div class=sidebar id=sidebar><form class=mx-auto method=get action=/search><input type=text name=keyword placeholder=Search data-search id=search-box></form><div class=sidebar-tree><ul class=tree id=tree><li id=list-heading><a href=/notes data-filter=all>Notes</a></li><div class=subtree><li><i data-feather=plus-circle></i><a class=list-link href=/notes/splunk/> Splunk</a><ul><li><a class=list-link href=/notes/splunk/spl/ title=SPL>SPL</a></li><li><a class=list-link href=/notes/splunk/cli/ title=CLI>CLI</a></li><li><a class=list-link href=/notes/splunk/splunk-upgrade/ title=Upgrade>Upgrade</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/notes/linux/> Linux</a><ul><li><a class=list-link href=/notes/linux/cli/ title=Bash>Bash</a></li><li><a class=list-link href=/notes/linux/logrotate/ title=Logrotate>Logrotate</a></li><li><a class=list-link href=/notes/linux/lvm/lvm_cheatsheet/ title="LVM cheatsheet">LVM cheatsheet</a></li><li><a class=list-link href=/notes/linux/scripts/addsudouser/ title=script-SudoUser>script-SudoUser</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/notes/tools/> Tools</a><ul><li><a class=list-link href=/notes/tools/ncdu/ title=ncdu>ncdu</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/notes/coding/> Coding</a><ul><li><a class=list-link href=/notes/coding/python/ title=Python>Python</a></li><li><a class=list-link href=/notes/coding/git/ title=GIT>GIT</a></li></ul></li></div></ul></div></div></div></section><section class=content-section id=content-section><div class="content container-fluid" id=content><div class="container-fluid note-card-holder" id=note-card-holder><div style=display:block;width:100%;max-width:none><div class=note-card><div class=item><h5 class=note-title><span>Troubleshooting:</span></h5><div class=card><div class=card-body><p>Errorcheck within Splunk GUI</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>index<span style=color:#f92672>=</span>_internal log_level<span style=color:#f92672>=</span>ERROR source<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;/opt/splunk/var/log/splunk/splunkd.log&#34;</span>
</span></span></code></pre></div><p>Check Splunk version</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>| rest splunk_server<span style=color:#f92672>=</span>* count<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span> /services/server/info 
</span></span><span style=display:flex><span>| table version host
</span></span></code></pre></div></div></div></div></div><div class=note-card><div class=item><h5 class=note-title><span>Index</span></h5><div class=card><div class=card-body><p>List indexes with the retention period</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>| rest splunk_server<span style=color:#f92672>=</span>* /services/data/indexes 
</span></span><span style=display:flex><span>| eval <span style=color:#e6db74>&#34;Retention Period (months)&#34;</span><span style=color:#f92672>=</span>round<span style=color:#f92672>((</span>frozenTimePeriodInSecs/2628000<span style=color:#f92672>)</span>,0<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>| search NOT title IN <span style=color:#f92672>(</span><span style=color:#e6db74>&#34;_*&#34;</span>, <span style=color:#e6db74>&#34;main&#34;</span>, <span style=color:#e6db74>&#34;history&#34;</span>, <span style=color:#e6db74>&#34;summary&#34;</span>, <span style=color:#e6db74>&#34;splunklogger&#34;</span><span style=color:#f92672>)</span> 
</span></span><span style=display:flex><span>| table title <span style=color:#e6db74>&#34;Retention Period (months)&#34;</span> 
</span></span><span style=display:flex><span>| rename title as Index
</span></span><span style=display:flex><span><span style=color:#e6db74>```</span><span style=color:#66d9ef>for</span> years, divide frozenTimePeriodInSecs/31556952; <span style=color:#66d9ef>for</span> days, divide frozenTimePeriodInSecs/86400<span style=color:#e6db74>```</span>
</span></span></code></pre></div></div></div></div></div><div class=note-card><div class=item><h5 class=note-title><span>Hosts</span></h5><div class=card><div class=card-body><p>Overview of hosts sending logs by index</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>| tstats values<span style=color:#f92672>(</span>host<span style=color:#f92672>)</span> where index<span style=color:#f92672>=</span>* by index
</span></span></code></pre></div></div></div></div></div><div class=note-card><div class=item><h5 class=note-title><span>License</span></h5><div class=card><div class=card-body><p>Usage per day by index + percentages</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>index<span style=color:#f92672>=</span>_internal source<span style=color:#f92672>=</span>*license_usage.log type<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Usage&#34;</span>
</span></span><span style=display:flex><span>| bin _time span<span style=color:#f92672>=</span>1d
</span></span><span style=display:flex><span>| stats sum<span style=color:#f92672>(</span>b<span style=color:#f92672>)</span> as b by idx, _time
</span></span><span style=display:flex><span>| eval GB<span style=color:#f92672>=</span>round<span style=color:#f92672>((</span>b/31556952<span style=color:#f92672>)</span>,2<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>| eventstats sum<span style=color:#f92672>(</span>GB<span style=color:#f92672>)</span> as total_GB by _time
</span></span><span style=display:flex><span>| eval percentage<span style=color:#f92672>=</span>round<span style=color:#f92672>((</span>GB/total_GB<span style=color:#f92672>)</span>*100,2<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>| sort -_time -GB
</span></span><span style=display:flex><span>| fields - b, total_GB
</span></span><span style=display:flex><span>| rename idx as Index, GB as <span style=color:#e6db74>&#34;Size (GB)&#34;</span>, percentage as <span style=color:#e6db74>&#34;Percentage (%)&#34;</span>
</span></span><span style=display:flex><span>| convert timeformat<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;%Y-%m-%d&#34;</span> ctime<span style=color:#f92672>(</span>_time<span style=color:#f92672>)</span> as Date
</span></span><span style=display:flex><span>| fields Date, Index, <span style=color:#e6db74>&#34;Size (GB)&#34;</span>, <span style=color:#e6db74>&#34;Percentage (%)&#34;</span>
</span></span><span style=display:flex><span><span style=color:#e6db74>```</span><span style=color:#66d9ef>for</span> years, divide b/31556952; <span style=color:#66d9ef>for</span> days, divide b/31556952<span style=color:#e6db74>```</span>
</span></span></code></pre></div></div></div></div></div><div class=note-card><div class=item><h5 class=note-title><span>Users</span></h5><div class=card><div class=card-body><p>List users and their roles</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>| rest /services/authentication/users splunk_server<span style=color:#f92672>=</span>local
</span></span><span style=display:flex><span>| fields title roles email
</span></span><span style=display:flex><span>| rename title as username
</span></span></code></pre></div></div></div></div></div></div><div style=display:block;width:100%;max-width:none><div class=note-card><div class=item><h5 class=note-title><span>Maintenance:</span></h5><div class=card><div class=card-body><p>Start Splunk</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>/opt/splunk/bin/splunk start
</span></span></code></pre></div><p>Stop Splunk</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>/opt/splunk/bin/splunk stop
</span></span></code></pre></div><p>Restart Splunk</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>/opt/splunk/bin/splunk restart
</span></span></code></pre></div><p>Check if Splunk is running</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>/opt/splunk/bin/splunk status
</span></span></code></pre></div><p>Reload a serverclass to push deployment apps without restarting Splunk"</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>/opt/splunk/bin/splunk reload deploy-server -class <span style=color:#f92672>[</span>serverclass-name<span style=color:#f92672>]</span>
</span></span></code></pre></div><p>Check license expiration date</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>/opt/splunk/bin/splunk list licenses | grep <span style=color:#e6db74>&#34;expiration_time&#34;</span> | awk -F<span style=color:#e6db74>&#39;:&#39;</span> <span style=color:#e6db74>&#39;{print $2}&#39;</span> | xargs -I<span style=color:#f92672>{}</span> date -d @<span style=color:#f92672>{}</span> +<span style=color:#e6db74>&#34;%Y-%m-%d %H:%M:%S&#34;</span>
</span></span></code></pre></div><p>List installed apps and their status</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>/opt/splunk/bin/splunk list app
</span></span></code></pre></div><p>List installed apps and their version (if found)</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>/opt/splunk/bin/splunk list app | grep version /opt/splunk/etc/apps/*/default/app.conf
</span></span></code></pre></div><p>Install an app</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>/splunk install app &lt;path to app.package&gt;
</span></span></code></pre></div><p>Update an app</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>/splunk install app &lt;path to app.package&gt; -update <span style=color:#ae81ff>1</span>
</span></span></code></pre></div><p>Remove an app</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>/opt/splunk/bin/splunk remove app <span style=color:#f92672>[</span>appname<span style=color:#f92672>]</span>
</span></span></code></pre></div><p>Check Splunk admins</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>/opt/splunk/bin/splunk list user | grep admin -B2
</span></span></code></pre></div></div></div></div></div><div class=note-card><div class=item><h5 class=note-title><span>Basic config:</span></h5><div class=card><div class=card-body><p>Enable Splunk service to start when the host boots up</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>/opt/splunk/bin/splunk enable
</span></span></code></pre></div><p>Disable Splunk service so it doesn&rsquo;t start when the host boots up</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>/opt/splunk/bin/splunk disable
</span></span></code></pre></div></div></div></div></div><div class=note-card><div class=item><h5 class=note-title><span>Extra:</span></h5><div class=card><div class=card-body><p>Find the startup message</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cat /opt/splunk/var/log/splunk/splunkd_stdout.log | grep <span style=color:#e6db74>&#34;Splunk&gt;&#34;</span> | tail -n <span style=color:#ae81ff>1</span>
</span></span></code></pre></div></div></div></div></div></div><div style=display:block;width:100%;max-width:none><div class=note-card><div class=item><h5 class=note-title><span>Upgrade procedure:</span></h5><div class=card><div class=card-body><h1 id=splunk-upgrade-guide>Splunk Upgrade Guide</h1><p>This document provides a step-by-step procedure to upgrade Splunk from an existing version to a newer release. Follow each section carefully to ensure a smooth upgrade process.</p><h2 id=table-of-contents>Table of Contents</h2><ol><li>Preparation</li><li>Download and Transfer Files</li><li>Pre-Upgrade Checks</li><li>Device State Management</li><li>Backup Current Configuration</li><li>Install the New Version</li><li>Post-Upgrade Verification</li><li>Documentation and Communication</li></ol><h2 id=1-preparation>1. Preparation</h2><ul><li>Ensure you have access to the target devices and necessary permissions.</li><li>Confirm the current Splunk version.</li><li>Notify customer and colleagues about the upcoming upgrade.</li><li>Review release notes for the target version.</li></ul><h2 id=2-download-and-transfer-files>2. Download and Transfer Files</h2><h3 id=download-the-splunk-installer>Download the Splunk Installer</h3><p>You can use the wget command to download the package on the host
wget -O splunk-<version>-<hash>-Linux-x86_64.tgz &ldquo;<a href=https://download.splunk.com/products/splunk/releases/ target=_blank rel=noopener>https://download.splunk.com/products/splunk/releases/</a><version>/linux/splunk-<version>-<hash>-Linux-x86_64.tgz&rdquo;</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo -i
</span></span><span style=display:flex><span>cd /tmp
</span></span><span style=display:flex><span>wget -O splunk-9.4.3-237ebbd22314-linux-amd64.tgz <span style=color:#e6db74>&#34;https://download.splunk.com/products/splunk/releases/9.4.3/linux/splunk-9.4.3-237ebbd22314-linux-amd64.tgz&#34;</span>
</span></span></code></pre></div><h3 id=transfer-the-installer-to-target-devices>Transfer the Installer to Target Devices</h3><p>Use WinSCP or similar tools to connect and send to the device:
put &ldquo;path\to\splunk-<version>-<hash>-Linux-x86_64.tgz&rdquo; &ldquo;/tmp/splunk-<version>-<hash>-Linux-x86_64.tgz&rdquo;</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>set path<span style=color:#f92672>=</span>C:<span style=color:#ae81ff>\P</span>rogram Files <span style=color:#f92672>(</span>x86<span style=color:#f92672>)</span><span style=color:#ae81ff>\W</span>inSCP;%path%
</span></span><span style=display:flex><span>winscp sftp://&lt;CLI-account&gt;@&lt;device_NAT_IP&gt;:/tmp
</span></span><span style=display:flex><span>put <span style=color:#e6db74>&#34;path\to\splunk-9.4.3-237ebbd22314-linux-amd64.tgz&#34;</span> <span style=color:#e6db74>&#34;/tmp/splunk-9.4.3-237ebbd22314-linux-amd64.tgz&#34;</span>
</span></span></code></pre></div><p>Use SCP on more recent windows machines or on Linux:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>scp <span style=color:#e6db74>&#34;path\to\splunk-9.4.3-237ebbd22314-linux-amd64.tgz&#34;</span> user@remote-ip:<span style=color:#e6db74>&#34;/tmp/splunk-9.4.3-237ebbd22314-linux-amd64.tgz&#34;</span>
</span></span></code></pre></div><h2 id=3-pre-upgrade-checks>3. Pre-Upgrade Checks</h2><p>Check if Splunk has an active process:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ps -ef | grep splunk
</span></span></code></pre></div><p>Check if Splunk is running:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>/opt/splunk/bin/splunk status
</span></span></code></pre></div><p>Check Splunk version:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>/opt/splunk/bin/splunk --version
</span></span></code></pre></div><h2 id=4-device-state-management>4. Device State Management</h2><p>Check whether a monitoring needs to set the host in maintenance mode</p><p>On Splunk in environments with index clusters: Maintenance mode halts most bucket fixup activity and prevents frequent rolling of hot buckets. It is useful when performing peer upgrades and other maintenance activities on an indexer cluster.
Enable maintenance mode:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>/opt/splunk/bin/splunk enable maintenance-mode
</span></span></code></pre></div><p>Disable maintenance mode:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>/opt/splunk/bin/splunk disable maintenance-mode
</span></span></code></pre></div><p>Enable maintenance mode:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>/opt/splunk/bin/splunk show maintenance-mode
</span></span></code></pre></div><h2 id=5-backup-current-configuration>5. Backup Current Configuration</h2><p>Check KV Store status</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>/opt/splunk/bin/splunk show kvstore-status
</span></span></code></pre></div><p>Backup KV Store</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>/opt/splunk/bin/splunk backup kvstore
</span></span></code></pre></div><p>Check backup</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ls -la /opt/splunk/var/lib/splunk/kvstorebackup/
</span></span></code></pre></div><p>Backup config files</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo -i
</span></span><span style=display:flex><span>cd /tmp
</span></span><span style=display:flex><span>mkdir /tmp/etc_backup<span style=color:#66d9ef>$(</span>date +<span style=color:#e6db74>&#34;%d-%m-%Y&#34;</span><span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>cp -a /opt/splunk/etc/ /tmp/etc_backup<span style=color:#66d9ef>$(</span>date +<span style=color:#e6db74>&#34;%d-%m-%Y&#34;</span><span style=color:#66d9ef>)</span>/
</span></span></code></pre></div><p>Check backup</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ls /tmp/etc_backup<span style=color:#66d9ef>$(</span>date +<span style=color:#e6db74>&#34;%d-%m-%Y&#34;</span><span style=color:#66d9ef>)</span>/etc
</span></span></code></pre></div><h2 id=6-install-the-new-version>6. Install the New Version</h2><p>stop splunk using Splunk command</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>/opt/splunk/bin/splunk stop
</span></span></code></pre></div><p>stop splunk using systemctl command</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>systemctl stop splunk
</span></span></code></pre></div><p>Unpack the Installer</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>tar -xvzf /tmp/splunk-9.4.3-237ebbd22314-linux-amd64.tgz -C /opt/
</span></span></code></pre></div><p>Change the owner of the Splunk folder recursively with the account running Splunk</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>chown -R splunk.splunk /opt/splunk
</span></span></code></pre></div><p>Since I&rsquo;m using a splunk user account (created without elevated privileges) to run splunk, I am switching to the account</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>su - splunk
</span></span></code></pre></div><p>Start Splunk with License Acceptance</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>/opt/splunk/bin/splunk start --accept-license --answer-yes
</span></span></code></pre></div><h2 id=7-post-upgrade-verification>7. Post-Upgrade Verification</h2><p>Check if Splunk is running</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>/opt/splunk/bin/splunk status
</span></span></code></pre></div><p>Check recent logs for errors</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>tail -20f /opt/splunk/var/log/splunk/splunkd.log
</span></span></code></pre></div><p>Check Splunk version</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>/opt/splunk/bin/splunk --version
</span></span></code></pre></div><p>Check if Splunk service is run by splunk user</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ps -ef | grep splunkd | grep -v grep
</span></span></code></pre></div><h2 id=8-documentation-and-communication>8. Documentation and Communication</h2><ul><li>Update internal documentation with the new version details.</li><li>Notify customer and colleagues of the successful upgrade.</li><li>Share release notes and any post-upgrade instructions.</li></ul></div></div></div></div></div><div style=display:block;width:100%;max-width:none><div class=note-card><div class=item><h5 class=note-title><span>Troubleshooting (files):</span></h5><div class=card><div class=card-body><p>Find a file or directory</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>find / -type f -name <span style=color:#e6db74>&#34;filename&#34;</span> 2&gt;/dev/null
</span></span><span style=display:flex><span>find / -type d -name <span style=color:#e6db74>&#34;dirname&#34;</span> 2&gt;/dev/null
</span></span></code></pre></div><p>find files that contain a pattern</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>find . -type f -exec grep -l <span style=color:#e6db74>&#39;version&#39;</span> <span style=color:#f92672>{}</span> <span style=color:#ae81ff>\;</span>
</span></span></code></pre></div></div></div></div></div><div class=note-card><div class=item><h5 class=note-title><span>Troubleshooting (system):</span></h5><div class=card><div class=card-body><p>Check logs if a service has executed/failed before (I needed to check if logrotate was running daily, also checked for rsyslog after)</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>journalctl | grep logrotate
</span></span></code></pre></div><p>check if machine is a vm or barebone</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>dmidecode -s system-manufacturer
</span></span></code></pre></div><p>check folder disk usage</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>du -hs * | sort -h
</span></span></code></pre></div><p>check open port</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>(</span>echo &gt; /dev/tcp/10.254.4.54/22<span style=color:#f92672>)</span> &gt;/dev/null 2&gt;&amp;<span style=color:#ae81ff>1</span> <span style=color:#f92672>&amp;&amp;</span> echo <span style=color:#e6db74>&#34;It&#39;s up&#34;</span> <span style=color:#f92672>||</span> echo <span style=color:#e6db74>&#34;It&#39;s down&#34;</span>
</span></span></code></pre></div><p>check for listening ports</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo lsof -i -P -n | grep LISTEN
</span></span><span style=display:flex><span>sudo netstat -tulpn | grep LISTEN
</span></span><span style=display:flex><span>sudo ss -tulpn | grep LISTEN
</span></span><span style=display:flex><span>sudo lsof -i:22 <span style=color:#75715e>## see a specific port such as 22 ##</span>
</span></span><span style=display:flex><span>sudo nmap -sTU -O IP-address-Here
</span></span></code></pre></div></div></div></div></div><div class=note-card><div class=item><h5 class=note-title><span>Troubleshooting (SSL):</span></h5><div class=card><div class=card-body><p>Check expiry date on .pem file</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>openssl x509 -enddate -noout -in /path/to/certificate.pem
</span></span></code></pre></div></div></div></div></div><div class=note-card><div class=item><h5 class=note-title><span>Maintenance:</span></h5><div class=card><div class=card-body><p>dry-run an update on OS</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo yum check-update
</span></span></code></pre></div><p>Check if a reboot is required</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>needs-restarting -r
</span></span></code></pre></div><p>remove cache of updates for old data</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>rm -rf /var/cache/yum
</span></span></code></pre></div><p>block icmp</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sysctl -w net.ipv4.icmp_echo_ignore_all<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>
</span></span></code></pre></div></div></div></div></div><div class=note-card><div class=item><h5 class=note-title><span>File manipulation:</span></h5><div class=card><div class=card-body><p>remove empty lines from file</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sed -i <span style=color:#e6db74>&#39;/^$/d&#39;</span> &lt;filename&gt;
</span></span></code></pre></div></div></div></div></div><div class=note-card><div class=item><h5 class=note-title><span>Account control:</span></h5><div class=card><div class=card-body><p>change to root</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo -i
</span></span></code></pre></div><p>Grep sudo users</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>rm -f /tmp/names; <span style=color:#66d9ef>for</span> user in <span style=color:#66d9ef>$(</span>getent passwd | cut -d: -f1<span style=color:#66d9ef>)</span>; <span style=color:#66d9ef>do</span> count<span style=color:#f92672>=</span><span style=color:#66d9ef>$((</span>count+1<span style=color:#66d9ef>))</span>; <span style=color:#66d9ef>if</span> sudo -l -U <span style=color:#e6db74>&#34;</span>$user<span style=color:#e6db74>&#34;</span> | grep -q <span style=color:#e6db74>&#34;ALL&#34;</span>; <span style=color:#66d9ef>then</span> echo <span style=color:#e6db74>&#34;</span>$user<span style=color:#e6db74>&#34;</span> &gt;&gt; /tmp/names; echo <span style=color:#e6db74>&#34;Checked </span>$count<span style=color:#e6db74> of </span><span style=color:#66d9ef>$(</span>getent passwd | cut -d: -f1 | wc -l<span style=color:#66d9ef>)</span><span style=color:#e6db74> users.&#34;</span>; <span style=color:#66d9ef>fi</span>; <span style=color:#66d9ef>done</span>; clear; cat /tmp/names; rm -f /tmp/names
</span></span></code></pre></div></div></div></div></div></div><div style=display:block;width:100%;max-width:none><div class=note-card><div class=item><h5 class=note-title><span>Logrotate Configuration Cheat Sheet:</span></h5><div class=card><div class=card-body><blockquote><p>This cheat sheet provides an extensive list of Logrotate configuration directives, their descriptions, and examples.<br>Use this as a quick reference to master log rotation on Unix-like systems.</p></blockquote></div></div></div></div><div class=note-card><div class=item><h5 class=note-title><span>Basic structure:</span></h5><div class=card><div class=card-body><p>Each configuration block is tied to a log file or set of log files. Example:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>/var/log/example.log <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    daily
</span></span><span style=display:flex><span>    rotate <span style=color:#ae81ff>7</span>
</span></span><span style=display:flex><span>    compress
</span></span><span style=display:flex><span>    missingok
</span></span><span style=display:flex><span>    notifempty
</span></span><span style=display:flex><span>    create <span style=color:#ae81ff>0640</span> root adm
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div></div></div></div></div><p><div class=note-card><div class=item><h5 class=note-title><span>Configuration Directives & Examples:</span></h5><div class=card><div class=card-body><h4 id=basic-settings>Basic Settings:</h4><p><code>rotate &lt;count></code><br>Keep <count>number of old log files before deleting them.</p><p><code>daily | weekly | monthly | yearly</code><br>Frequency of rotation.</p><h4 id=compression-options>Compression Options:</h4><p><code>compress</code><br>Compress old versions of log files with gzip.</p><p><code>nocompress</code><br>Do not compress old logs.</p><p><code>delaycompress</code><br>Postpone compression to the next rotation cycle (used with compress).</p><h4 id=file-handling>File Handling:</h4><p><code>missingok</code><br>Ignore missing log files and don’t issue an error.</p><p><code>notifempty</code><br>Do not rotate the log if it is empty.</p><p><code>ifempty</code><br>Rotate the log even if it is empty (default behavior).</p><p><code>create &lt;mode> &lt;owner> &lt;group></code><br>Create a new log file with specified permissions.</p><p><code>copy</code><br>Make a copy of the log file and truncate the original.</p><p><code>copytruncate</code><br>Truncate the original log file after copying it (useful for active logs).</p><h4 id=date--naming>Date & Naming:</h4><p><code>dateext</code><br>Append an extension with the current date to rotated log files.</p><p><code>dateformat .%Y-%m-%d</code><br>Custom format for dateext (e.g., .2025-06-06).</p><p><code>extension &lt;ext></code><br>Force specific extension for rotated files (e.g., .log).</p><h4 id=size-based-rotation>Size-Based Rotation:</h4><p><code>maxage &lt;days></code><br>Remove rotated logs older than <days>.</p><p><code>minsize &lt;size></code><br>Rotate only if log size is above <size>.</p><p><code>size &lt;size></code><br>Rotate if log file size meets threshold, regardless of time.</p><p><code>maxsize &lt;size></code><br>Do not rotate if log is larger than specified size.</p><h4 id=directory--scripts>Directory & Scripts:</h4><p><code>olddir &lt;dir></code><br>Move rotated logs to a specified directory.</p><p><code>sharedscripts</code><br>Run postrotate script once for all matching logs.</p><p><code>postrotate/endscript</code><br>Script to run after log rotation.</p><p><code>prerotate/endscript</code><br>Script to run before log rotation.</p><p><code>firstaction/endscript</code><br>Run only once before rotation begins (before prerotate).</p><p><code>lastaction/endscript</code><br>Run once after rotation finishes (after postrotate).</p><p><code>tabooext + &lt;ext></code><br>Treat additional extensions as taboo (not rotated).</p></div></div></div></div><div class=note-card><div class=item><h5 class=note-title><span>Full Example Configuration:</span></h5><div class=card><div class=card-body><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>/var/log/myapp/*.log <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    daily
</span></span><span style=display:flex><span>    rotate <span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span>    size 100M
</span></span><span style=display:flex><span>    compress
</span></span><span style=display:flex><span>    delaycompress
</span></span><span style=display:flex><span>    missingok
</span></span><span style=display:flex><span>    notifempty
</span></span><span style=display:flex><span>    create <span style=color:#ae81ff>0640</span> appuser adm
</span></span><span style=display:flex><span>    sharedscripts
</span></span><span style=display:flex><span>    postrotate
</span></span><span style=display:flex><span>        systemctl reload myapp &gt; /dev/null 2&gt;&amp;<span style=color:#ae81ff>1</span> <span style=color:#f92672>||</span> true
</span></span><span style=display:flex><span>    endscript
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div></div></div></div></div><div class=note-card><div class=item><h5 class=note-title><span>Tips:</span></h5><div class=card><div class=card-body><ul><li>Run <code>logrotate -d &lt;config></code> to debug your config without applying changes.</li><li>Use <code>logrotate -f &lt;config></code> to force rotation for testing.</li><li>Logrotate is typically triggered via cron or systemd timers.</li><li>Keep your config DRY by centralizing shared logic in /etc/logrotate.conf and using includes.</li></ul></div></div></div></div></p></div><div style=display:block;width:100%;max-width:none><div class=note-card><div class=item><h5 class=note-title><span>LVM cheatsheet</span></h5><div class=card><div class=card-body><h2 id=acronyms-you-must-know>Acronyms you must know</h2><ul><li><strong>PV</strong> = Physical Volume</li><li><strong>VG</strong> = Volume Group</li><li><strong>LV</strong> = Logical Volume</li></ul><pre tabindex=0><code>    PV1  PV2   PV3  PV4
      \  |      |  /
       VG1      VG2
        |       |  \ 
       LV1     LV2  LV3
</code></pre></div></div><div class=card><div class=card-body><h2 id=step-by-step-lvm-setup>Step-by-Step LVM Setup</h2><h3 id=1-add-a-physical-disk>1. Add a Physical Disk</h3><p>connect a physical/virtual disk to your system.</p><p><strong>Overview of block devices</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>lsblk
</span></span></code></pre></div><p><strong>Used/available space on mounted filesystems</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>df -h
</span></span></code></pre></div></div></div><div class=card><div class=card-body><h3 id=2-create-physical-volumes>2. Create Physical Volumes</h3><p><strong>Info</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pvck        <span style=color:#75715e># Check PV metadata</span>
</span></span><span style=display:flex><span>pvdisplay   <span style=color:#75715e># Display PV attributes</span>
</span></span><span style=display:flex><span>pvs         <span style=color:#75715e># Report PV information</span>
</span></span><span style=display:flex><span>pvscan      <span style=color:#75715e># Scan for PVs</span>
</span></span></code></pre></div><p><strong>Create</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pvcreate /dev/sda /dev/sdb /dev/sdc /dev/sdd
</span></span></code></pre></div><p><strong>Delete</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pvremove /dev/sdX
</span></span></code></pre></div><p><strong>Edit</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pvchange     <span style=color:#75715e># Change PV attributes</span>
</span></span><span style=display:flex><span>pvmove       <span style=color:#75715e># Move physical extents</span>
</span></span><span style=display:flex><span>pvresize     <span style=color:#75715e># Resize PV</span>
</span></span></code></pre></div></div></div><div class=card><div class=card-body><h3 id=3-create-volume-groups>3. Create Volume Groups</h3><p><strong>Info</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>vgck        <span style=color:#75715e># Check VG metadata</span>
</span></span><span style=display:flex><span>vgdisplay   <span style=color:#75715e># VG attributes</span>
</span></span><span style=display:flex><span>vgs         <span style=color:#75715e># Report VG info</span>
</span></span><span style=display:flex><span>vgscan      <span style=color:#75715e># Scan for VGs</span>
</span></span></code></pre></div><p><strong>Create</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>vgcreate vg0 /dev/sda
</span></span></code></pre></div><p><strong>Delete</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>vgremove vg_name
</span></span></code></pre></div><p><strong>Edit</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>vgcfgbackup
</span></span><span style=display:flex><span>vgcfgrestore
</span></span><span style=display:flex><span>vgchange     <span style=color:#75715e># Change VG attributes</span>
</span></span><span style=display:flex><span>vgconvert    <span style=color:#75715e># Metadata format change</span>
</span></span><span style=display:flex><span>vgexport
</span></span><span style=display:flex><span>vgimport
</span></span><span style=display:flex><span>vgimportclone
</span></span><span style=display:flex><span>vgmerge
</span></span><span style=display:flex><span>vgsplit
</span></span><span style=display:flex><span>vgextend vg0 /dev/sdc /dev/sdd
</span></span><span style=display:flex><span>vgreduce
</span></span><span style=display:flex><span>vgrename
</span></span><span style=display:flex><span>vgmknodes
</span></span></code></pre></div></div></div><div class=card><div class=card-body><h3 id=4-create-logical-volumes>4. Create Logical Volumes</h3><p><strong>Info</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>lvdisplay    <span style=color:#75715e># Show LV attributes</span>
</span></span><span style=display:flex><span>lvmdiskscan  <span style=color:#75715e># Scan for devices</span>
</span></span><span style=display:flex><span>lvs          <span style=color:#75715e># Report info</span>
</span></span><span style=display:flex><span>lvscan       <span style=color:#75715e># Scan for LVs</span>
</span></span></code></pre></div><p><strong>Create</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>lvcreate -n lvbackup -L 50G vgbackup -r
</span></span></code></pre></div><p><strong>Delete</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>lvremove /dev/vg_name/lv_name
</span></span></code></pre></div><p><strong>Edit</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>lvchange     <span style=color:#75715e># Change LV attributes</span>
</span></span><span style=display:flex><span>lvconvert    <span style=color:#75715e># Mirror/snapshot conversion</span>
</span></span><span style=display:flex><span>lvextend /dev/vg_name/lv_name
</span></span><span style=display:flex><span>lvreduce     <span style=color:#75715e># Reduce size</span>
</span></span><span style=display:flex><span>lvresize     <span style=color:#75715e># Resize</span>
</span></span><span style=display:flex><span>lvrename     <span style=color:#75715e># Rename</span>
</span></span><span style=display:flex><span>resize2fs /dev/vg0/lv_root   <span style=color:#75715e># Resize filesystem</span>
</span></span><span style=display:flex><span>xfs_growfs -d /dev/vg-group-name/lv-name
</span></span></code></pre></div></div></div><div class=card><div class=card-body><h3 id=5-create-a-filesystem-on-your-logical-volume>5. Create a filesystem on your Logical Volume</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>mkfs.ext4 /dev/vgbackup/lvbackup
</span></span></code></pre></div></div></div><div class=card><div class=card-body><h3 id=6-mounting-the-logical-volume>6. Mounting the Logical Volume</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>blkid /dev/vgbackup/lvbackup    <span style=color:#75715e># Get UUID</span>
</span></span><span style=display:flex><span>mkdir /path/to/folder           <span style=color:#75715e># Mount point</span>
</span></span><span style=display:flex><span>vim /etc/fstab                  <span style=color:#75715e># Add entry with UUID</span>
</span></span><span style=display:flex><span>mount -a                        <span style=color:#75715e># Mount all from fstab</span>
</span></span></code></pre></div></div></div><div class=card><div class=card-body><h2 id=overview-commands>Overview Commands</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pvs     <span style=color:#75715e># List physical volumes</span>
</span></span><span style=display:flex><span>vgs     <span style=color:#75715e># List volume groups</span>
</span></span><span style=display:flex><span>lvs     <span style=color:#75715e># List logical volumes</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>pvdisplay
</span></span><span style=display:flex><span>vgdisplay
</span></span><span style=display:flex><span>lvdisplay
</span></span></code></pre></div></div></div><div class=card><div class=card-body><h2 id=snapshotting>Snapshotting</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>lvcreate --size 1G --snapshot --name snap_name /dev/vg0/lvdata
</span></span><span style=display:flex><span>lvconvert --merge /dev/vg0/snap_name
</span></span></code></pre></div></div></div><div class=card><div class=card-body><h2 id=filesystem-resize-after-lv-resize>Filesystem Resize After LV Resize</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>lvextend -L +10G /dev/vgbackup/lvbackup
</span></span><span style=display:flex><span>resize2fs /dev/vgbackup/lvbackup
</span></span></code></pre></div></div></div><div class=card><div class=card-body><h2 id=helpful-tips>Helpful Tips</h2><ul><li>Always back up metadata:<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>vgcfgbackup
</span></span></code></pre></div></li><li>Reload partition tables without rebooting:<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>partprobe /dev/sdX
</span></span></code></pre></div></li></ul></div></div></div></div></div><div style=display:block;width:100%;max-width:none><div class=note-card><div class=item><h5 class=note-title><span>Script: add sudo user</span></h5><div class=card><div class=card-body><p>Create a sudo user that won&rsquo;t prompt for password on executing sudo commands.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#!/bin/bash
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e># Ensure script is run as root</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[[</span> $EUID -ne <span style=color:#ae81ff>0</span> <span style=color:#f92672>]]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>   echo <span style=color:#e6db74>&#34;❌ This script must be run as root&#34;</span>
</span></span><span style=display:flex><span>   exit <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Prompt for new username</span>
</span></span><span style=display:flex><span>read -p <span style=color:#e6db74>&#34;Enter new username: &#34;</span> username
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Check if user already exists</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> id <span style=color:#e6db74>&#34;</span>$username<span style=color:#e6db74>&#34;</span> &amp;&gt;/dev/null; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>    echo <span style=color:#e6db74>&#34;⚠️ User &#39;</span>$username<span style=color:#e6db74>&#39; already exists.&#34;</span>
</span></span><span style=display:flex><span>    exit <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Prompt for password (silent input)</span>
</span></span><span style=display:flex><span>read -s -p <span style=color:#e6db74>&#34;Enter password for </span>$username<span style=color:#e6db74>: &#34;</span> password
</span></span><span style=display:flex><span>echo
</span></span><span style=display:flex><span>read -s -p <span style=color:#e6db74>&#34;Confirm password: &#34;</span> password_confirm
</span></span><span style=display:flex><span>echo
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Check passwords match</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[[</span> <span style=color:#e6db74>&#34;</span>$password<span style=color:#e6db74>&#34;</span> !<span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;</span>$password_confirm<span style=color:#e6db74>&#34;</span> <span style=color:#f92672>]]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>    echo <span style=color:#e6db74>&#34;❌ Passwords do not match.&#34;</span>
</span></span><span style=display:flex><span>    exit <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Create user with home directory and bash shell</span>
</span></span><span style=display:flex><span>useradd -m -s /bin/bash <span style=color:#e6db74>&#34;</span>$username<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Set user password</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>username<span style=color:#e6db74>}</span><span style=color:#e6db74>:</span><span style=color:#e6db74>${</span>password<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> | chpasswd
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Add user to sudo group</span>
</span></span><span style=display:flex><span>usermod -aG sudo <span style=color:#e6db74>&#34;</span>$username<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Create a sudoers file to allow passwordless sudo</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;</span>$username<span style=color:#e6db74> ALL=(ALL) NOPASSWD:ALL&#34;</span> &gt; <span style=color:#e6db74>&#34;/etc/sudoers.d/</span>$username<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>chmod <span style=color:#ae81ff>440</span> <span style=color:#e6db74>&#34;/etc/sudoers.d/</span>$username<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;✅ User &#39;</span>$username<span style=color:#e6db74>&#39; created with bash shell and passwordless sudo access.&#34;</span>
</span></span></code></pre></div></div></div></div></div></div><div style=display:block;width:100%;max-width:none><div class=note-card><div class=item><h5 class=note-title><span>ncdu:</span></h5><div class=card><div class=card-body><p>Ncdu is a disk usage analyzer with a text-mode user interface. It is designed to find space hogs on a remote server where you don’t have an entire graphical setup available, but it is a useful tool even on regular desktop systems. Ncdu aims to be fast, simple, easy to use, and should be able to run on any POSIX-like system.<br>install:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>wget https://dev.yorhel.nl/download/ncdu-2.8.1-linux-x86_64.tar.gz
</span></span><span style=display:flex><span>tar -xzf ncdu-2.8.1-linux-x86_64.tar.gz
</span></span><span style=display:flex><span>sudo mv ncdu /usr/local/bin/
</span></span></code></pre></div><p>usage:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ncdu &lt;directory_name&gt;
</span></span></code></pre></div></div></div></div></div></div><div style=display:block;width:100%;max-width:none><div class=note-card><div class=item><h5 class=note-title><span>Python virtual environment:</span></h5><div class=card><div class=card-body><p>create a virtual environment</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>python3 -m venv venv
</span></span></code></pre></div><p>Activate the virtual environment</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>source venv/bin/activate
</span></span></code></pre></div><p>Get out of the virtual environment</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>deactivate
</span></span></code></pre></div></div></div></div></div></div><div style=display:block;width:100%;max-width:none><div class=note-card><div class=item><h5 class=note-title><span>Version control:</span></h5><div class=card><div class=card-body><h1 id=what-is-version-control>What is Version Control?</h1><p>Version control systems are tools that manage changes made to files and directories in a project. They allow you to keep track of what you did when, undo any changes you decide you don&rsquo;t want, and collaborate at scale with others. This cheat sheet focuses on one of the most popular one, Git.</p></div></div></div></div><div class=note-card><div class=item><h5 class=note-title><span>Definitions:</span></h5><div class=card><div class=card-body><h1 id=basic-definition>Basic definition</h1><ul><li>Local repo or repository:<br>A local directory containing code and files for the project</li><li>Remote repository:<br>An online version of the local repository hosted on services like GitHub, GitLab, and BitBucket</li><li>Cloning:<br>The act of making a clone or copy of a repository in a new directory</li><li>Commit:<br>A snapshot of the project you can come back to</li><li>Branch:<br>A copy of the project used for working in an isolated environment without affecting the main project</li><li>Git merge:<br>The process of combining two branches together</li></ul><h1 id=more-advanced-definition>More advanced definition</h1><ul><li>.gitignore file:<br>A file that lists other files you want git not to track (e.g. large data folders, private info, and any local files that shouldn’t be seen by the public)</li><li>Staging area:<br>a cache that holds changes you want to commit next</li><li>Git stash:<br>another type of cache that holds unwanted changes you may want to come back later</li><li>Commit ID or hash:<br>a unique identifier for each commit, used for switching to different save points</li><li>HEAD (always capitalized letters):<br>a reference name for the latest commit, to save you having to type Commit IDs. HEAD<del>n syntax is used to refer to older commits (e.g. HEAD</del>2 refers to the second-to-last commit)</li></ul></div></div></div></div><div class=note-card><div class=item><h5 class=note-title><span>How to install:</span></h5><div class=card><div class=card-body><p>On OS X or Windows — Using an installer</p><ul><li>Download the installer</li><li>Follow the prompts
On OS X — Using Homebrew</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>brew install git
</span></span></code></pre></div><p>On Linux</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt-get install git
</span></span></code></pre></div><p>Check if installation successful (On any platform)</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git --version
</span></span></code></pre></div></div></div></div></div><div class=note-card><div class=item><h5 class=note-title><span>Configuration:</span></h5><div class=card><div class=card-body><p>If you are working in a team on a single repo, it is important for others to know who made certain changes to the code. So, Git allows you to set user credentials such as name, email, etc..</p><h1 id=basic-information>basic information</h1><ul><li>Configure your email</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git config user.email <span style=color:#f92672>[</span>your.email@domain.com<span style=color:#f92672>]</span>
</span></span></code></pre></div><ul><li>Configure your name</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git config user.name <span style=color:#f92672>[</span>your-name<span style=color:#f92672>]</span>
</span></span></code></pre></div><h1 id=important-tags>Important tags</h1><p>to determine the scope of configurations, Git lets you use tags to determine the scope of the information you’re using during setup</p><ul><li>Local directory, single project (this is the default tag)</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git config --local user.email “my_email@example.com”
</span></span></code></pre></div><ul><li>All git projects under the current user</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git config --global user.email “my_email@example.com”
</span></span></code></pre></div><ul><li>For all users on the current machine</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git config --system user.email “my_email@example.com”
</span></span></code></pre></div><h1 id=list-configurations>List configurations</h1><p>List all key-value configurations</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git config --list
</span></span></code></pre></div><ul><li>Get the value of a single key</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git config --get &lt;key&gt;
</span></span></code></pre></div><h1 id=setting-aliases>Setting aliases</h1><ul><li>Create an alias named gc for the “git commit” command</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git config --global alias.gc commit
</span></span></code></pre></div><p>Example usage:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>gc -m <span style=color:#e6db74>&#34;New commit&#34;</span>
</span></span></code></pre></div><ul><li>Create an alias named ga for the “git add” command</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git config --global alias.ga add
</span></span></code></pre></div></div></div></div></div><div class=note-card><div class=item><h5 class=note-title><span>Managing repos:</span></h5><div class=card><div class=card-body><h1 id=creating-local-repositories>Creating local repositories</h1><ul><li>Clone a repository from remote hosts (GitHub, GitLab, DagsHub, etc.)</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git clone &lt;remote_repo_url&gt;
</span></span></code></pre></div><ul><li>Initialize git tracking inside the current directory</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git init
</span></span></code></pre></div><ul><li>Create a git-tracked repository inside a new directory</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git init <span style=color:#f92672>[</span>dir_name<span style=color:#f92672>]</span>
</span></span></code></pre></div><ul><li>Clone only a specific branch</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git clone -branch &lt;branch_name&gt; &lt;repo_url&gt;
</span></span></code></pre></div><ul><li>Cloning into a specified directory</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git clone &lt;repo_url&gt; &lt;dir_name&gt;
</span></span></code></pre></div><h1 id=managing-remote-repositories>Managing remote repositories</h1><ul><li>List remote repos</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git remote
</span></span></code></pre></div><ul><li>Create a new connection called <remote>to a remote repository on servers like GitHub, GitLab, DagsHub, etc</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git remote add &lt;remote&gt; &lt;url_to_remote&gt;
</span></span></code></pre></div><ul><li>Remove a connection to a remote repo called <remote></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git remote rm &lt;remote&gt;
</span></span></code></pre></div><ul><li>Rename a remote connection</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git remote rename &lt;old_name&gt; &lt;new_name&gt;
</span></span></code></pre></div></div></div></div></div><div class=note-card><div class=item><h5 class=note-title><span>Handling files:</span></h5><div class=card><div class=card-body><h1 id=adding-and-removing-files>Adding and removing files</h1><ul><li>Add a file or directory to git for tracking</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git add &lt;filename_or_dir&gt;
</span></span></code></pre></div><ul><li>Add all untracked and tracked files inside the current directory to git</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git add .
</span></span></code></pre></div><ul><li>Remove a file from a working directory or staging area</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git rm &lt;filename_or_dir&gt;
</span></span></code></pre></div><h1 id=saving-and-working-with-changes>Saving and working with changes</h1><ul><li>See changes in the local repository</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git status
</span></span></code></pre></div><ul><li>Saving a snapshot of the staged changes with a custom message</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git commit -m “<span style=color:#f92672>[</span>Commit message<span style=color:#f92672>]</span>”
</span></span></code></pre></div><ul><li>Staging changes in all tracked files and committing with a message</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git add -am “<span style=color:#f92672>[</span>Commit message<span style=color:#f92672>]</span>”
</span></span></code></pre></div><ul><li>Editing the message of the latest commit</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git commit --amend -m “<span style=color:#f92672>[</span>New commit message<span style=color:#f92672>]</span>”
</span></span></code></pre></div><blockquote><h1 id=a-note-on-stashes>A note on stashes</h1><p>Git stash allows you to temporarily save edits you&rsquo;ve made to your working copy so you can return to your work later. Stashing is especially useful when you are not yet ready to commit
changes you&rsquo;ve done, but would like to revisit them at a later time.</p></blockquote><ul><li>Saving staged and unstaged changes to stash for a later use</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git stash
</span></span></code></pre></div><ul><li>Stashing staged, unstaged and untracked files as well</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git stash -u
</span></span></code></pre></div><ul><li>Stashing everything (including ignored files)</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git stash --all
</span></span></code></pre></div><ul><li>Reapply previously stashed changes and empty the stash</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git stash pop
</span></span></code></pre></div><ul><li>Reapply previously stashed changes and keep the stash</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git stash apply
</span></span></code></pre></div><ul><li>Dropping changes in the stash</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git stash drop
</span></span></code></pre></div><ul><li>Show uncommitted changes since the last commit</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git diff
</span></span></code></pre></div><ul><li>Show the differences between two commits (should provide the commit IDs)</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git diff &lt;id_1&gt; &lt;id_2&gt;
</span></span></code></pre></div></div></div></div></div><div class=note-card><div class=item><h5 class=note-title><span>Branches:</span></h5><div class=card><div class=card-body><ul><li>List all branches</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git branch
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git branch --list
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git branch -a
</span></span></code></pre></div><ul><li>Create a new local branch named new_branch without checking out that branch</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git branch &lt;new_branch&gt;
</span></span></code></pre></div><ul><li>Switch into an existing branch named <branch></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git checkout &lt;branch&gt;
</span></span></code></pre></div><ul><li>Create a new local branch and switch into it</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git checkout -b &lt;new_branch&gt;
</span></span></code></pre></div><ul><li>Safe delete a local branch (prevents deleting unmerged changes)</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git branch -d &lt;branch&gt;
</span></span></code></pre></div><ul><li>Force delete a local branch (whether merged or unmerged)</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git branch -D &lt;branch&gt;
</span></span></code></pre></div><ul><li>Rename the current branch to &lt;new_name></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git branch -m &lt;new_name&gt;
</span></span></code></pre></div><ul><li>Push a copy of local branch named branch to the remote repo</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git push &lt;remote_repo&gt; branch~
</span></span></code></pre></div><ul><li>Delete a remote branch named branch</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git push &lt;remote_repo&gt; :branch
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git push &lt;remote_repo&gt; --delete branch
</span></span></code></pre></div><ul><li>Merging a branch into the main branch</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git checkout main
</span></span><span style=display:flex><span>git merge &lt;other_branch&gt;
</span></span></code></pre></div><ul><li>Merging a branch and creating a commit message</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git merge --no-ff &lt;other_branch&gt;
</span></span></code></pre></div><ul><li>Compare the differences between two branches</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git diff &lt;branch_1&gt; &lt;branch_2&gt;
</span></span></code></pre></div><ul><li>Compare a single <file>between two branches</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git diff &lt;branch_1&gt; &lt;branch_2&gt; &lt;file&gt;
</span></span></code></pre></div></div></div></div></div><div class=note-card><div class=item><h5 class=note-title><span>Handle commits:</span></h5><div class=card><div class=card-body><h1 id=pulling-changes>Pulling changes</h1><ul><li>Download all commits and branches from the <remote>without applying them on the local repo</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git fetch &lt;remote&gt;
</span></span></code></pre></div><ul><li>Only download the specified <branch>from the <remote></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git fetch &lt;remote&gt; &lt;branch&gt;
</span></span></code></pre></div><ul><li>Merge the fetched changes if accepted</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git merge &lt;remote&gt;/&lt;branch&gt;
</span></span></code></pre></div><ul><li>A more aggressive version of fetch which calls fetch and merge simultaneously</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git pull &lt;remote&gt;
</span></span></code></pre></div><h1 id=review-work-with-logs>Review work with logs</h1><ul><li>List all commits with their author, commit ID, date and message</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git log
</span></span></code></pre></div><ul><li>List one commit per line (-n tag can be used to limit the number of commits displayed (e.g. -5))</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git log --oneline <span style=color:#f92672>[</span>-n<span style=color:#f92672>]</span>
</span></span></code></pre></div><ul><li>Log all commits with diff information:</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git log --stat
</span></span></code></pre></div><ul><li>Log commits after some date</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git log --oneline --after<span style=color:#f92672>=</span>”YYYY-MM-DD<span style=color:#e6db74>&#34;
</span></span></span></code></pre></div><ul><li>Log commits before some date</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git log --oneline --before<span style=color:#f92672>=</span>”last year”
</span></span></code></pre></div><h1 id=reverse-changes>Reverse changes</h1><ul><li>Checking out (switching to) older commits</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git checkout HEAD~2
</span></span></code></pre></div><ul><li>Checks out the third-to-last commit</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git checkout &lt;commit_id&gt;
</span></span></code></pre></div><ul><li>Undo the latest commit but leave the working directory unchanged
You can undo as many commits as you want by changing the number after the tilde</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git reset HEAD~1
</span></span></code></pre></div><ul><li>Discard all changes of the latest commit (no easy recovery)
Instead of HEAD~n, you can provide commit hash as well. Changes after that commit will be destroyed</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git reset --hard HEAD~1
</span></span></code></pre></div><ul><li>Undo a single given commit, without modifying commits that come after it (a safe reset)</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git revert <span style=color:#f92672>[</span>commit_id<span style=color:#f92672>]</span>
</span></span></code></pre></div></div></div></div></div><div class=note-card><div class=item><h5 class=note-title><span>sources:</span></h5><div class=card><div class=card-body><a href=https://media.datacamp.com/legacy/image/upload/v1656573882/Marketing/Blog/git_cheat_sheet.pdf target=_blank rel=noopener>DatacampCheatsheet</a><br><a href=https://about.gitlab.com/images/press/git-cheat-sheet.pdf target=_blank rel=noopener>GitlabCheatsheet</a></div></div></div></div></div></div><div class=paginator><ul class="pagination pagination-default"><li class="page-item disabled"><a aria-disabled=true aria-label=First class=page-link role=button tabindex=-1><span aria-hidden=true>&#171;&#171;</span></a></li><li class="page-item disabled"><a aria-disabled=true aria-label=Previous class=page-link role=button tabindex=-1><span aria-hidden=true>&#171;</span></a></li><li class="page-item active"><a aria-current=page aria-label="Page 1" class=page-link role=button>1</a></li><li class=page-item><a href=/notes/page/2/ aria-label="Page 2" class=page-link role=button>2</a></li><li class=page-item><a href=/notes/page/3/ aria-label="Page 3" class=page-link role=button>3</a></li><li class=page-item><a href=/notes/page/2/ aria-label=Next class=page-link role=button><span aria-hidden=true>&#187;</span></a></li><li class=page-item><a href=/notes/page/3/ aria-label=Last class=page-link role=button><span aria-hidden=true>&#187;&#187;</span></a></li></ul></div></div></section></div><footer id=footer class="container-fluid text-center align-content-center footer pb-2"><div class="container pt-5"><div class="row text-start"><div class="col-md-4 col-sm-12"><h5>Navigation</h5><ul><li class=nav-item><a class=smooth-scroll href=https://siemforge.xyz/#about>About</a></li><li class=nav-item><a class=smooth-scroll href=https://siemforge.xyz/#skills>Skills</a></li><li class=nav-item><a class=smooth-scroll href=https://siemforge.xyz/#experiences>Experiences</a></li><li class=nav-item><a class=smooth-scroll href=https://siemforge.xyz/#education>Education</a></li><li class=nav-item><a class=smooth-scroll href=https://siemforge.xyz/#projects>Projects</a></li><li class=nav-item><a class=smooth-scroll href=https://siemforge.xyz/#featured-posts>Featured Posts</a></li><li class=nav-item><a class=smooth-scroll href=https://siemforge.xyz/#accomplishments>Accomplishments</a></li><li class=nav-item><a class=smooth-scroll href=https://toha-guides.netlify.app/posts/>Docs</a></li></ul></div><div class="col-md-4 col-sm-12"><h5>Contact me:</h5><ul><li><a href=mailto:benny@siemforge.xyz target=_blank rel=noopener><span><i class="fas fa-envelope"></i></span> <span>benny@siemforge.xyz</span></a></li><li><a href=https://github.com/bennytemmerman target=_blank rel=noopener><span><i class="fab fa-github"></i></span> <span>bennytemmerman</span></a></li><li><a href=https://www.linkedin.com/in/bennytemmerman target=_blank rel=noopener><span><i class="fab fa-linkedin"></i></span> <span>Benny Temmerman</span></a></li><li><a href=tel:************ target=_blank rel=noopener><span><i class="fas fa-phone-alt"></i></span> <span>************</span></a></li></ul></div></div></div><hr><div class=container><p id=disclaimer><strong>Liability Notice:</strong> This site provides information about my personal findings combined with information found on the internet. Projects and articles may be used as inspiration, however I am not responsible for any fun or harm caused.</p></div><hr><div class=container><div class="row text-start"><div class=col-md-4><a id=theme href=https://github.com/hugo-toha/toha target=_blank rel=noopener><img src=/images/theme-logo_hu_b3360284c55cf72d.png alt="Toha Theme Logo">
Toha</a></div><div class="col-md-4 text-center">© 2025 Copyright.</div><div class="col-md-4 text-end"><a id=hugo href=https://gohugo.io/ target=_blank rel=noopener>Powered by
<img src=/images/hugo-logo.svg alt="Hugo Logo" height=18></a></div></div></div></footer><script src=/application.bf4c8b43674ad09b4c683a98e5ab2a4aafc9a69bbdb3bd92dae1098ffd49c3c6.js integrity="sha256-v0yLQ2dK0JtMaDqY5asqSq/Jppu9s72S2uEJj/1Jw8Y=" defer></script></body></html>